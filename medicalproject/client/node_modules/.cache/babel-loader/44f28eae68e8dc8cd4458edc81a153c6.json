{"remainingRequest":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/patient_modules/patient_views_modules/TimelinePatient.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/patient_modules/patient_views_modules/TimelinePatient.vue","mtime":1570363466000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from \"vuex\";\nimport PatientService from '@/services/PatientService';\nimport DrugService from '@/services/DrugService';\nexport default {\n  data: function data() {\n    return {\n      showModal: false,\n      fullWidthImage: false,\n      infoModal: {\n        id: 'info-modal',\n        title: '',\n        content: ''\n      },\n      arrayNameDoctor: [],\n      condition2: false,\n      filesDisplay: [],\n      filesDisplay2: [],\n      user: null,\n\n      get isUserLoggedIn() {\n        return localStorage.getItem('isUserLoggedIn' || false);\n      }\n\n    };\n  },\n  computed: _objectSpread({}, mapGetters([\"patient_records\", \"patient_records_details\", \"nameDoctorWrite_records\", \"patientInfo\", \"AlternativeRecord\"])),\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var userCONST, userID, id_patient, payload, lengthRecord, idDoctorWriteRecord, i, ArrayNameDoctor, _DrugRecord, _AlternativeRecord, lengthOfAlternativeRecord, _i, index, base64String, files_temp, _id_patient, _payload, _lengthRecord, _idDoctorWriteRecord, _i2, _ArrayNameDoctor, _DrugRecord2, _AlternativeRecord2, _lengthOfAlternativeRecord, _i3, _index, _base64String, _index2, _i4, name;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              userCONST = JSON.parse(localStorage.getItem('user'));\n              this.user = userCONST;\n              userID = JSON.parse(localStorage.getItem('user')).id;\n              this.user = userCONST;\n\n              if (!(this.user.roles == 1)) {\n                _context.next = 30;\n                break;\n              }\n\n              id_patient = this.user.id;\n              _context.next = 8;\n              return PatientService.show(id_patient);\n\n            case 8:\n              payload = _context.sent.data;\n\n              if (!(payload.length > 0)) {\n                _context.next = 28;\n                break;\n              }\n\n              this.$store.dispatch(\"update_inforRecordsPatientDetail\", payload);\n              lengthRecord = payload.length;\n              idDoctorWriteRecord = [];\n\n              for (i = 0; i < lengthRecord; i++) {\n                idDoctorWriteRecord[i] = payload[i].id_doctor;\n              }\n\n              _context.next = 16;\n              return PatientService.get_nameDoctorRecordPatient({\n                id_doctor: idDoctorWriteRecord\n              });\n\n            case 16:\n              ArrayNameDoctor = _context.sent.data;\n              this.$store.dispatch(\"set_nameDoctorWrite_records\", ArrayNameDoctor);\n              _context.next = 20;\n              return DrugService.get_DrugRecordPatient({\n                id_account: 0\n              });\n\n            case 20:\n              _DrugRecord = _context.sent.data;\n              this.$store.dispatch(\"set_patient_records_details\", _DrugRecord);\n              _context.next = 24;\n              return PatientService.get_AlternativeRecord(payload[0].id_patient);\n\n            case 24:\n              _AlternativeRecord = _context.sent.data;\n              this.$store.dispatch(\"set_AlternativeRecord\", _AlternativeRecord);\n              lengthOfAlternativeRecord = _AlternativeRecord.length;\n\n              for (_i = 0; _i < lengthOfAlternativeRecord; _i++) {\n                for (index = 0; index < _AlternativeRecord[_i].length; index++) {\n                  if (_AlternativeRecord[_i][index].image) {\n                    try {\n                      base64String = btoa(new Uint8Array(_AlternativeRecord[_i][index].image.data).reduce(function (data, byte) {\n                        return data + String.fromCharCode(byte);\n                      }, ''));\n                      files_temp = {\n                        url: null,\n                        id_record: null,\n                        isClick: false\n                      };\n                      files_temp.url = new Buffer(base64String, 'base64');\n                      files_temp.id_record = _AlternativeRecord[_i][index].id_record;\n                      this.filesDisplay2.push(files_temp);\n                    } catch (error) {\n                      this.$toasted.show(\"\".concat(error.response.data.error), {\n                        theme: \"toasted-primary\",\n                        position: \"bottom-center\",\n                        duration: 5000\n                      });\n                    }\n                  }\n                }\n              }\n\n            case 28:\n              _context.next = 54;\n              break;\n\n            case 30:\n              if (!(this.user.roles == 3)) {\n                _context.next = 54;\n                break;\n              }\n\n              _id_patient = this.patientInfo.id_account;\n              _context.next = 34;\n              return PatientService.show(_id_patient);\n\n            case 34:\n              _payload = _context.sent.data;\n\n              if (!_payload.length) {\n                _context.next = 54;\n                break;\n              }\n\n              this.$store.dispatch(\"update_inforRecordsPatientDetail\", _payload); //lay ra record patient\n\n              _lengthRecord = _payload.length;\n              _idDoctorWriteRecord = [];\n\n              for (_i2 = 0; _i2 < _lengthRecord; _i2++) {\n                _idDoctorWriteRecord[_i2] = _payload[_i2].id_doctor;\n              }\n\n              _context.next = 42;\n              return PatientService.get_nameDoctorRecordPatient({\n                id_doctor: _idDoctorWriteRecord\n              });\n\n            case 42:\n              _ArrayNameDoctor = _context.sent.data;\n              this.$store.dispatch(\"set_nameDoctorWrite_records\", _ArrayNameDoctor);\n              _context.next = 46;\n              return DrugService.get_DrugRecordPatient({\n                id_account: 0\n              });\n\n            case 46:\n              _DrugRecord2 = _context.sent.data;\n              this.$store.dispatch(\"set_patient_records_details\", _DrugRecord2);\n              _context.next = 50;\n              return PatientService.get_AlternativeRecord(_id_patient);\n\n            case 50:\n              _AlternativeRecord2 = _context.sent.data;\n              this.$store.dispatch(\"set_AlternativeRecord\", _AlternativeRecord2);\n              _lengthOfAlternativeRecord = _AlternativeRecord2.length;\n\n              for (_i3 = 0; _i3 < _lengthOfAlternativeRecord; _i3++) {\n                for (_index = 0; _index < _AlternativeRecord2[_i3].length; _index++) {\n                  if (_AlternativeRecord2[_i3][_index].image) {\n                    try {\n                      _base64String = btoa(new Uint8Array(_AlternativeRecord2[_i3][_index].image.data).reduce(function (data, byte) {\n                        return data + String.fromCharCode(byte);\n                      }, ''));\n                      files_temp = {\n                        url: null,\n                        id_record: null,\n                        isClick: false\n                      };\n                      files_temp.url = new Buffer(_base64String, 'base64');\n                      files_temp.id_record = _AlternativeRecord2[_i3][_index].id_record;\n                      this.filesDisplay2.push(files_temp);\n                    } catch (error) {\n                      this.$toasted.show(\"\".concat(error.response.data.error), {\n                        theme: \"toasted-primary\",\n                        position: \"bottom-center\",\n                        duration: 5000\n                      });\n                    }\n                  }\n                }\n              }\n\n            case 54:\n              if (this.patient_records && this.nameDoctorWrite_records) {\n                for (_index2 = 0; _index2 < this.patient_records.length; _index2++) {\n                  for (_i4 = 0; _i4 < this.nameDoctorWrite_records.length; _i4++) {\n                    if (this.nameDoctorWrite_records[_i4].id_account == this.patient_records[_index2].id_doctor) {\n                      name = this.nameDoctorWrite_records[_i4].firstname + ' ' + this.nameDoctorWrite_records[_i4].lastname;\n                      this.arrayNameDoctor[_index2] = name;\n                    }\n                  }\n                }\n\n                this.condition2 = true;\n              }\n\n            case 55:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  methods: {\n    info: function info(item, index, button) {\n      var _this = this;\n\n      this.infoModal.title = \"\".concat(this.patient_records[index].patient_title);\n      var temp2 = this.patient_records_details.filter(function (f) {\n        return f.id_record == item.id;\n      });\n      this.filesDisplay = this.filesDisplay2.filter(function (f) {\n        return f.id_record === item.id;\n      });\n\n      if (temp2.length > 0 || this.filesDisplay.length > 0) {\n        if (temp2.length > 0) {\n          temp2.forEach(function (element) {\n            var temp = \"        \\n                  T\\xEAn thu\\u1ED1c: \".concat(element.name, \"\\n                  T\\u1ED5ng: \").concat(element.total, \"\\n                  S\\xE1ng: \").concat(element.morning, \"\\n                  Tr\\u01B0a: \").concat(element.midday, \"\\n                  Chi\\u1EC1u:\").concat(element.afternoon, \"\\n                  T\\u1ED1i:\").concat(element.night, \"\\n                  Ghi ch\\xFA:\").concat(element.note, \"\\n                  \");\n            _this.infoModal.content += temp;\n          });\n        } else {\n          this.infoModal.content = \"Kh\\xF4ng c\\xF3 \\u0111\\u01A1n thu\\u1ED1c n\\xE0o \\u0111\\u01B0\\u1EE3c t\\xECm th\\u1EA5y\";\n        }\n\n        if (this.filesDisplay.length > 0) {\n          this.infoModal.alternativeContent = '';\n        } else {\n          this.infoModal.alternativeContent = \"Kh\\xF4ng c\\xF3 h\\xECnh \\u1EA3nh n\\xE0o \\u0111\\u01B0\\u1EE3c t\\xECm th\\u1EA5y\";\n        }\n      } else {\n        this.infoModal.content = \"Kh\\xF4ng c\\xF3 b\\u1EA3n ghi n\\xE0o \\u0111\\u01B0\\u1EE3c t\\xECm th\\u1EA5y\";\n        this.infoModal.alternativeContent = \"Kh\\xF4ng c\\xF3 h\\xECnh \\u1EA3nh n\\xE0o \\u0111\\u01B0\\u1EE3c t\\xECm th\\u1EA5y\";\n      }\n\n      this.$root.$emit('bv::show::modal', this.infoModal.id, button);\n    },\n    resetInfoModal: function resetInfoModal() {\n      this.infoModal.title = '';\n      this.infoModal.content = '';\n    }\n  }\n};",{"version":3,"sources":["TimelinePatient.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n      <div class=\"timeline\" v-if=\"patient_records.length && this.isUserLoggedIn && this.condition2\">\n        <ul>\n          <li v-for=\"(record, index ) in patient_records\" :key=\"record.patient_id\">\n            <div class=\"content\">\n              <h3>{{record.patient_title}}</h3>\n              <div class=\"location pt-2 pb-3\">\n                <img src=\"@/assets/images/placeholder.svg\" /><span class=\"pl-2\">{{record.patient_location}}</span>\n              </div>\n              <p class=\"record_patient_content\"> <span class=\"diagnose\">Chẩn đoán:</span>&ensp;{{record.patient_content}}</p>\n              <p class=\"record_patient_detail\" @click=\"info(record, index, $event.target)\"> Xem chi tiết thuốc và lời dặn của bác sĩ</p>\n              <p class=\"doctor\"><img src=\"@/assets/images/doctor1.svg\" /><span class=\"pl-2 doctor_content\">{{arrayNameDoctor[index]}}</span></p>\n            </div>\n            <div class=\"time\">\n              <h4>{{record.patient_time}}</h4>             \n            </div>\n          </li>\n          <div style=\"clear:both;\"></div>\n        </ul>\n        <b-modal :id=\"infoModal.id\" :title=\"infoModal.title\" ok-only @hide=\"resetInfoModal\">\n          <pre>{{ infoModal.content }}</pre>\n          <pre>{{ infoModal.alternativeContent }}</pre>\n      \n          <div class=\"row\">\n              <span v-for=\"(item,index) in filesDisplay\" :key=\"index\" class=\"row pl-5\"> \n                <img :src=\"filesDisplay[index].url\" alt=\"err\" class=\"imageDisplay\" @click.prevent=\"filesDisplay[index].isClick = !filesDisplay[index].isClick\" :class=\"{full : filesDisplay[index].isClick}\" >\n              </span>\n          </div>\n        </b-modal>\n      </div>\n      <div class=\"text-center pb-5 pt-5 mt-3 mb-3\" v-else>Chưa có hồ sơ bệnh án nào được tìm thấy</div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters} from \"vuex\";\nimport PatientService from '@/services/PatientService'\nimport DrugService from '@/services/DrugService'\nexport default {\n  data(){\n      return{\n        showModal: false,\n        fullWidthImage: false,\n        infoModal: {\n            id: 'info-modal',\n            title: '',\n            content: ''\n          },\n        arrayNameDoctor:[],\n        condition2:false,\n        filesDisplay: [],\n        filesDisplay2:[],\n        user:null,\n        get isUserLoggedIn() {\n          return localStorage.getItem('isUserLoggedIn' || false);\n        }\n      }\n    },\ncomputed: {\n        ...mapGetters([\"patient_records\",\"patient_records_details\",\"nameDoctorWrite_records\",\"patientInfo\",\"AlternativeRecord\"])\n    },\n    async mounted() {\n      const userCONST = JSON.parse(localStorage.getItem('user'));\n      this.user = userCONST\n      const userID = JSON.parse(localStorage.getItem('user')).id;\n\n      this.user = userCONST;\n      if(this.user.roles == 1){\n        const id_patient = this.user.id\n        const payload = (await PatientService.show(id_patient)).data\n        if(payload.length > 0){\n            this.$store.dispatch(\"update_inforRecordsPatientDetail\",payload)\n            const lengthRecord = payload.length\n            const idDoctorWriteRecord = []\n            for(let i = 0 ;i<lengthRecord;i++){\n              idDoctorWriteRecord[i]= payload[i].id_doctor\n            }\n            const ArrayNameDoctor = (await PatientService.get_nameDoctorRecordPatient(\n              {id_doctor:idDoctorWriteRecord})).data\n              this.$store.dispatch(\"set_nameDoctorWrite_records\",ArrayNameDoctor)\n\n\n              const _DrugRecord = (await DrugService.get_DrugRecordPatient({\n                id_account: 0\n              })).data\n              \n          this.$store.dispatch(\"set_patient_records_details\",_DrugRecord);\n\n\n          const _AlternativeRecord = (await PatientService.get_AlternativeRecord(payload[0].id_patient)).data\n          this.$store.dispatch(\"set_AlternativeRecord\",_AlternativeRecord);\n          let lengthOfAlternativeRecord = _AlternativeRecord.length\n\n          for(let i = 0;i<lengthOfAlternativeRecord;i++ ){\n            for(let index = 0;index <_AlternativeRecord[i].length;index++ ){\n              if(_AlternativeRecord[i][index].image ){\n                try{\n                  let base64String = btoa(\n                  new Uint8Array(_AlternativeRecord[i][index].image.data)\n                      .reduce((data, byte) => data + String.fromCharCode(byte), '')\n                  );\n                    var files_temp = {\n                      url:null,\n                      id_record:null,\n                      isClick:false\n                    };\n                  files_temp.url = new Buffer(base64String, 'base64')\n                  files_temp.id_record = _AlternativeRecord[i][index].id_record\n                  this.filesDisplay2.push(files_temp)\n                }catch (error) {\n                      this.$toasted.show(`${error.response.data.error}`, { \n                        theme: \"toasted-primary\", \n                        position: \"bottom-center\", \n                        duration : 5000\n                    });\n                  } \n              }\n            }\n          }\n        }\n     }\n     else if(this.user.roles == 3){\n       const id_patient = this.patientInfo.id_account\n        const payload = (await PatientService.show(id_patient)).data\n        if(payload.length){\n          this.$store.dispatch(\"update_inforRecordsPatientDetail\",payload)  //lay ra record patient\n          const lengthRecord = payload.length\n          const idDoctorWriteRecord = []\n          for(let i = 0 ;i<lengthRecord;i++){\n            idDoctorWriteRecord[i]= payload[i].id_doctor\n          }\n          const ArrayNameDoctor = (await PatientService.get_nameDoctorRecordPatient(\n            {id_doctor:idDoctorWriteRecord})).data\n          this.$store.dispatch(\"set_nameDoctorWrite_records\",ArrayNameDoctor)\n\n          const _DrugRecord = (await DrugService.get_DrugRecordPatient({\n            id_account: 0\n          })).data\n\n          \n        this.$store.dispatch(\"set_patient_records_details\",_DrugRecord)\n        const _AlternativeRecord = (await PatientService.get_AlternativeRecord(id_patient)).data\n        this.$store.dispatch(\"set_AlternativeRecord\",_AlternativeRecord);\n        let lengthOfAlternativeRecord = _AlternativeRecord.length\n        \n        for(let i = 0;i<lengthOfAlternativeRecord;i++ ){\n          for(let index = 0;index <_AlternativeRecord[i].length;index++ ){\n            if(_AlternativeRecord[i][index].image ){\n              try{\n                let base64String = btoa(\n                new Uint8Array(_AlternativeRecord[i][index].image.data)\n                    .reduce((data, byte) => data + String.fromCharCode(byte), '')\n                );\n                  var files_temp = {\n                    url:null,\n                    id_record:null,\n                    isClick:false\n                  };\n                files_temp.url = new Buffer(base64String, 'base64')\n                files_temp.id_record = _AlternativeRecord[i][index].id_record\n                this.filesDisplay2.push(files_temp)\n              }catch (error) {\n                    this.$toasted.show(`${error.response.data.error}`, { \n                      theme: \"toasted-primary\", \n                      position: \"bottom-center\", \n                      duration : 5000\n                  });\n                } \n            }\n          }\n        }\n      }\n\n\n\n\n        }\n\n        if(this.patient_records && this.nameDoctorWrite_records){   \n          for(let index = 0 ;index<this.patient_records.length;index++){\n            for(let i = 0;i<this.nameDoctorWrite_records.length;i++){\n              if(this.nameDoctorWrite_records[i].id_account == this.patient_records[index].id_doctor){        \n                let name = this.nameDoctorWrite_records[i].firstname +' '+this.nameDoctorWrite_records[i].lastname\n                  this.arrayNameDoctor[index] = name\n              }\n            }\n          }\n          this.condition2 = true\n\n      }\n    },\n    methods:{\n          info(item, index, button) {\n            this.infoModal.title = `${this.patient_records[index].patient_title}`\n            let temp2 = this.patient_records_details.filter(f => f.id_record == item.id);\n            this.filesDisplay = this.filesDisplay2.filter(f => f.id_record === item.id);\n            \n            if(temp2.length > 0 || this.filesDisplay.length > 0) {\n              if(temp2.length >0){\n                temp2.forEach(element => {\n                  let temp =         \n                  `        \n                  Tên thuốc: ${element.name }\n                  Tổng: ${element.total}\n                  Sáng: ${element.morning}\n                  Trưa: ${element.midday}\n                  Chiều:${element.afternoon}\n                  Tối:${element.night}\n                  Ghi chú:${element.note}\n                  ` \n                  this.infoModal.content += temp;\n               });\n              }else{\n                this.infoModal.content = `Không có đơn thuốc nào được tìm thấy`\n              }\n\n\n        if(this.filesDisplay.length >0){\n          this.infoModal.alternativeContent = ''\n        }else{\n            this.infoModal.alternativeContent = `Không có hình ảnh nào được tìm thấy`\n        }\n            \n            }\n            else {\n              this.infoModal.content = `Không có bản ghi nào được tìm thấy`\n              this.infoModal.alternativeContent = `Không có hình ảnh nào được tìm thấy`\n            }\n\n\n            this.$root.$emit('bv::show::modal', this.infoModal.id, button)\n      \n          },\n          resetInfoModal() {\n            this.infoModal.title = ''\n            this.infoModal.content = ''\n          },\n    }\n}\n</script>\n\n<style scoped>\n  body{\n     margin: 0;\n     padding: 0;\n  }\n  .timeline{\n    position: relative;\n    margin: 50px auto;\n    padding: 40px 0;\n    width: 1000px;\n    box-sizing: border-box;\n  }\n  .timeline::before{\n    content: '';\n    position: absolute;\n    left: 50%;\n    width: 2px;\n    height: 100%;\n    background: #c5c5c5;\n\n  }\n  .timeline ul {\n     margin: 0;\n     padding: 0;\n  }\n  .timeline ul li{\n     list-style: none;\n     position: relative;\n     width: 50%;\n     padding:20px 40px;\n     box-sizing: border-box;\n  }\n  .timeline ul li:nth-child(odd) {\n     float: left;\n     text-align: right;\n     clear: both;\n  }\n  .timeline ul li:nth-child(even) {\n     float: right;\n     text-align: left;\n     clear: both;\n  }\n  .content{\n    padding-bottom: 20px;\n  }\n  .timeline ul li:nth-child(odd)::before {\n    content: '';\n    position: absolute;\n    top: 24px;\n    right: -6px;\n    width: 10px;\n    height:  10px;\n    background:rgb(64, 196, 255);\n   \n    border-radius: 50%;\n    box-shadow: 0 0 0 3px rgb(64, 196, 255, .2);\n      \n  }\n  .timeline ul li:nth-child(even)::before {\n    content: '';\n    position: absolute;\n    top: 24px;\n    left: -4px;\n    width: 10px;\n    height:  10px;\n    background:rgb(64, 196, 255);\n     \n    border-radius: 50%;\n    box-shadow: 0 0 0 3px rgb(64, 196, 255,.2);\n   \n  }\n.timeline ul li h3{\n    margin: 0;\n    padding: 0;\n    /* font-weight: 600;\n    color:rgb(64, 196, 255); */\n    color:#e92163;\n    /* color: #162138;    */\n}\n.timeline ul li p{\n    margin: 10px 0 0;\n    padding: 0;\n}\n.timeline ul li .time h4 {\n    margin: 0;\n    padding: 0;\n    font-size: 14px;\n}\n\n.timeline ul li:nth-child(odd) .time{\n  position: absolute;\n  top: 12px;\n  right: -140px;\n  margin: 0;\n  padding:  8px 16px;\n  background: rgb(64, 196, 255);\n  color: #fff;\n  border-radius: 18px;\n  box-shadow: 0 0 0 3px rgb(64, 196, 255,.3);\n\n}\n\n.timeline ul li:nth-child(even) .time{\n  position: absolute;\n  top: 12px;\n  left: -140px;\n  margin: 0;\n  padding:  8px 16px;\n  background: rgb(64, 196, 255);\n  color: #fff;\n  border-radius: 18px;\n  box-shadow: 0 0 0 3px rgb(64, 196, 255,.3);\n}\n.location img{\n  height: 1rem;\n  width:  1rem;\n}\n.location{\n  color:#A9A9A9\n}\n\n.doctor_content{\n  color: rgb(9, 11, 12, .8)\n}\n\n.diagnose{\n  font-weight: 600;\n}\n.record_patient_detail{\n  /* border-bottom: 2px solid rgb(64, 196, 255); */\n  text-decoration: underline;\n  cursor: pointer;\n  color: #0070c9;\n}\n.doctor img{\n  height: 1.2rem;\n  width: 1.2rem;\n}\n.imageDisplay {\n  height: 5rem;\n  width: 5rem;\n   cursor: pointer;\n}\n\n.imageDisplay img {\n  width: 150px;\n  border-radius: 2px;\n  box-shadow: 1px 1px 3px 1px rgba(0, 0, 0, 0.5);\n}\n.full{\n    position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width:40%;\n  height:auto;\n}\n\n\n\n@media(max-width: 1000px){\n    .timeline{\n      width: 100%;     \n    }\n}\n\n\n@media(max-width: 767px)\n{\n    .timeline {\n      width: 100%;\n      padding-bottom: 0;     \n    }\n    .timeline::before{\n      left: 20px;\n    }\n    .timeline ul li:nth-child(odd),\n    .timeline ul li:nth-child(even)\n    {\n      width: 100%;      \n      text-align: left;\n      padding-left:50px;\n      padding-bottom: 50px; \n\n    }\n\n    .timeline ul li:nth-child(odd)::before,\n    .timeline ul li:nth-child(even)::before\n     {\n      top: -18px;\n      left: 16px;    \n    }\n  \n        \n    .timeline ul li:nth-child(odd) .time,\n    .timeline ul li:nth-child(even) .time\n    {\n      top: -30px;\n      left: 50px;\n      right:inherit;\n    }\n\n    .timeline ul li:nth-child(odd) .location,\n    .timeline ul li:nth-child(even) .location\n    {\n      top:0;\n      left: 30px;\n      right:inherit;\n    }\n    .timeline ul li h3{\n        padding-top: 1rem;\n    }\n\n}\n\n\n</style>\n"],"sourceRoot":"src/components/content/patient_modules/patient_views_modules"}]}
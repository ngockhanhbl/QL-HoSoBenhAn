{"remainingRequest":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/hospital_modules/DrugManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/hospital_modules/DrugManagement.vue","mtime":1572444017000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport HospitalService from '@/services/HospitalService'\nimport axios from 'axios';\nexport default {\n    data(){\n        return{\n            listSystem:'',\n            listDrug:[],\n            tenThuocSystem:'',\n            hoatChatSystem:'',\n            nongDoSystem:'',\n            baoCheSystem:'',\n            tuoiThoSystem:'',\n            selected:'',\n            infoModal: {\n                tenThuoc: '',\n                hoatChat: '',\n                baoChe:'',\n                nongDo:'',\n                tuoiTho:'',\n                congTySx:'',\n                id:''\n            },\n            user:'',\n            totalRows: 1,\n            currentPage: 1,\n            perPage: 5,\n            pageOptions: [5, 10, 15],\n            filter: null,\n            fields: [\n                { key: 'tenThuoc', label: 'Tên Thuốc', sortable: true, sortDirection: 'desc' },\n                { key: 'hoatChat', label: 'Hoạt Chất', sortable: true},\n                { key: 'baoChe', label: 'Dạng Bào Chế', sortable: true, sortDirection: 'desc' },\n                { key: 'nongDo', label: 'Nồng Độ', sortable: true, sortDirection: 'desc' },\n                { key: 'tuoiTho', label: 'Hạn Sử Dụng', sortable: true, sortDirection: 'desc' },\n                { key: 'actions', label: 'Actions', class: 'd-flex justify-content-center ' }\n            ],\n        }\n    },\n    async created(){\n        this.fetchdata();\n        const user = await localStorage.getItem(\"user\");\n        const userJSON = await JSON.parse(user)\n        this.user = await userJSON;\n        const roles = userJSON.roles\n        this.listDrug = (await HospitalService.getListDrugBank(userJSON.id)).data;\n        this.totalRows = this.listDrug.length\n    },\n    methods:{\n        CloseModalModify(){\n            this.$refs['modal-modify'].hide();\n        },\n        showModalModifyDrug(item,index,button){\n            this.infoModal.tenThuoc = item.tenThuoc;\n            this.infoModal.hoatChat = item.hoatChat;\n            this.infoModal.baoChe = item.baoChe;\n            this.infoModal.nongDo = item.nongDo;\n            this.infoModal.tuoiTho = item.tuoiTho;\n            this.infoModal.congTySx = item.congtySx;\n            this.infoModal.id = item.id;\n            this.$refs['modal-modify'].show();\n\n        },\n        async deleteDrug(item,index,button){\n            if(this.user.id){\n                try {\n                    await HospitalService.SendRequestDeleteDrug({\n                        id:item.id,\n                    })\n                    if (~index) \n                        this.listDrug.splice(index, 1)\n                    this.$toasted.show('Xóa Thành Công !!!', { \n                        theme: \"bubble\",\n                        position: \"bottom-right\", \n                        duration : 4000\n                    });\n                }catch (error) {\n                        this.$toasted.show(`${error.response.data.error}`, { \n                            theme: \"toasted-primary\",\n                            position: \"bottom-center\", \n                            duration : 4000\n                    });\n                }\n            }\n        },\n        checkform(route){\n            if(!this.infoModal.tenThuoc && !this.infoModal.hoatChat && !this.infoModal.baoChe && !this.infoModal.nongDo && !this.infoModal.tuoiTho && !this.infoModal.congTySx ){\n                this.$toasted.show('Vui Lòng Nhập Đầy Đủ Thông Tin !!!', { \n                    theme: \"toasted-primary\",\n                    position: \"bottom-center\", \n                    duration : 4000\n                });\n            }else{\n                if(route === 'add'){\n                    this.SendRequestCreateDrug();\n                }else{\n                    this.SendRequestModifyDrug();\n                }\n            }\n        },\n        async SendRequestModifyDrug(){\n            if(this.user.id){\n                try {\n                    await HospitalService.SendRequestModifyDrug({\n                        id:this.infoModal.id,\n                        id_hospital: this.user.id,\n                        tenThuoc: this.infoModal.tenThuoc,\n                        hoatChat: this.infoModal.hoatChat,\n                        baoChe:this.infoModal.baoChe,\n                        nongDo:this.infoModal.nongDo,\n                        tuoiTho:this.infoModal.tuoiTho,\n                        congTySx:this.infoModal.congTySx,\n                    })\n                    this.$toasted.show(`Cập Nhật Thành Công`, { \n                        theme: \"toasted-primary\",\n                        position: \"bottom-center\", \n                        duration : 4000\n                    });\n                    this.listDrug.filter(x=>x.id == this.infoModal.id).map((item) => {\n                        item.tenThuoc = this.infoModal.tenThuoc;\n                        item.hoatChat = this.infoModal.hoatChat;\n                        item.baoChe = this.infoModal.baoChe;\n                        item.nongDo = this.infoModal.nongDo;\n                        item.tuoiTho = this.infoModal.tuoiTho;\n                        item.congTySx = this.infoModal.congTySx;\n                    })\n                    this.CloseModalModify();\n                }catch (error) {\n                        this.$toasted.show(`${error.response.data.error}`, { \n                            theme: \"toasted-primary\",\n                            position: \"bottom-center\", \n                            duration : 4000\n                    });\n                }\n            }\n        },\n        async SendRequestCreateDrug(){\n            if(this.user.id){\n                try {\n                    await HospitalService.SendRequestCreateDrugbank({\n                        id_hospital: this.user.id,\n                        tenThuoc: this.infoModal.tenThuoc,\n                        hoatChat: this.infoModal.hoatChat,\n                        baoChe:this.infoModal.baoChe,\n                        nongDo:this.infoModal.nongDo,\n                        tuoiTho:this.infoModal.tuoiTho,\n                        congTySx:this.infoModal.congTySx,\n                    })\n                    this.$toasted.show(`Thêm Thuốc mới thành công`, { \n                        theme: \"toasted-primary\",\n                        position: \"bottom-center\", \n                        duration : 4000\n                    });\n                }catch (error) {\n                        this.$toasted.show(`${error.response.data.error}`, { \n                            theme: \"toasted-primary\",\n                            position: \"bottom-center\", \n                            duration : 4000\n                    });\n                }\n                this.resetModal();\n            }\n          \n        },\n        resetModal(){\n            this.$refs['modal-add'].hide();\n            this.infoModal = '';\n        },\n        onFiltered(filteredItems) {\n            this.totalRows = filteredItems.length\n            this.currentPage = 1\n        },\n        async fetchdata(){\n            await axios\n                .get('https://www.drugbank.vn/services/drugbank/api/public/thuoc?page=1&size=2000&fbclid=IwAR1vamwLTdSmIx8idqXMjg77a18AZ4nZYROoLE8dTTAR0sS4EUlvt7W3lMQ')\n                .then(response => (this.listSystem = response.data.filter(x=>x).map(x=>x)));\n            this.tenThuocSystem = [...new Set(this.listSystem.map(x=>x.tenThuoc))]\n            this.hoatChatSystem = [...new Set(this.listSystem.map(x=>x.hoatChat))] \n            this.nongDoSystem = [...new Set(this.listSystem.map(x=>x.nongDo))]\n            this.baoCheSystem = [...new Set(this.listSystem.map(x=>x.baoChe))] \n            this.tuoiThoSystem =[...new Set(this.listSystem.map(x=>x.tuoiTho))] \n        }\n    }\n    \n}\n\n",{"version":3,"sources":["DrugManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"DrugManagement.vue","sourceRoot":"src/components/content/hospital_modules","sourcesContent":["<template>\n    <div class=\"container mt-5 py-3\">\n                <b-row>\n                    <b-col md=\"12\" class=\"d-flex\">\n                        <b-col class=\"my-3\" md=\"5\">\n                            <b-form-group label-cols-sm=\"3\" label=\"Lọc\" class=\"mb-0\">\n                            <b-input-group>\n                                <b-form-input v-model=\"filter\" placeholder=\"Type to Search\"></b-form-input>\n                                <b-input-group-append>\n                                <b-button :disabled=\"!filter\" @click=\"filter = ''\">Clear</b-button>\n                                </b-input-group-append>\n                            </b-input-group>\n                            </b-form-group>\n                        </b-col>\n                        <b-col class=\"my-3\"  md=\"5\" >\n                            <b-form-group label-cols-sm=\"3\" label=\"Mỗi Trang\" class=\"mb-0\">\n                            <b-form-select v-model=\"perPage\" :options=\"pageOptions\"></b-form-select>\n                            </b-form-group>\n                        </b-col>\n                        <b-col md=\"2\" class=\"my-3 d-flex justify-content-end\">\n                            <b-button variant=\"outline-primary\" size='sm' v-b-modal.modal-add>Thêm Thuốc Mới</b-button>\n                        </b-col>\n                    </b-col>\n                    \n                </b-row>\n                <b-table\n                show-empty\n                bordered\n                hover\n                dark\n                striped\n                stacked=\"md\"\n                :items=\"listDrug\"\n                :fields=\"fields\"\n                :current-page=\"currentPage\"\n                :per-page=\"perPage\"\n                :filter=\"filter\"\n                ref=\"table\"\n                @filtered=\"onFiltered\"\n                >\n                    <template slot=\"actions\" slot-scope=\"row\">\n                        <b-button size=\"sm\" @click=\"showModalModifyDrug(row.item, row.index, $event.target)\" variant=\"outline-success\" class=\"mr-1\">\n                            Sửa Thông Tin\n                        </b-button>  \n\n                        <b-button size=\"sm\" @click=\"deleteDrug(row.item, row.index, $event.target)\" variant=\"outline-warning\" class=\"ml-1\">\n                            Xóa Thuốc\n                        </b-button>\n                    </template>\n                </b-table>\n\n                <b-row>\n                    <b-col md=\"6\" class=\"my-1\">\n                        <b-pagination\n                        v-model=\"currentPage\"\n                        :total-rows=\"totalRows\"\n                        :per-page=\"perPage\"\n                        class=\"my-0\"\n                        ></b-pagination>\n                    </b-col>\n                </b-row>\n\n\n\n\n        <b-modal id=\"modal-add\" size='lg' ref=\"modal-add\" title=\"Thêm Thuốc\">\n            <div>\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Tên Thuốc</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"LoadListDrug\" v-model=\"infoModal.tenThuoc\" class=\"width-100 style_input\">\n                        <datalist id=\"LoadListDrug\">\n                            <option v-for=\"(drug,index) in tenThuocSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div> \n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Hoạt Chất</p>\n                    <span class=\"col-sm-8\"><input list=\"ListHoatChat\"  type=\"text\" v-model=\"infoModal.hoatChat\" class=\"width-100 style_input\"></span>\n                    <datalist id=\"ListHoatChat\">\n                        <option v-for=\"(drug,index) in hoatChatSystem\" :key=\"index\">{{drug}}</option>\n                    </datalist>\n                </div>\n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Nồng Độ/Hàm Lượng</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"ListNongDo\" v-model=\"infoModal.nongDo\" class=\"width-100 style_input\">\n                        <datalist id=\"ListNongDo\">\n                            <option v-for=\"(drug,index) in nongDoSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div>\n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Dạng Bào Chế</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"ListBaoChe\" v-model=\"infoModal.baoChe\" class=\"width-100 style_input\">\n                        <datalist id=\"ListBaoChe\">\n                            <option v-for=\"(drug,index) in baoCheSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div>\n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Hạn Sử Dụng</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"ListTuoiTho\" v-model=\"infoModal.tuoiTho\" class=\"width-100 style_input\">\n                        <datalist id=\"ListTuoiTho\">\n                            <option v-for=\"(drug,index) in tuoiThoSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div>\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Công Ty Sản Xuất</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" v-model=\"infoModal.congTySx\" autocomplete=\"on\" class=\"width-100 style_input\">\n                    </span>\n                </div>\n            </div>\n            <template v-slot:modal-footer>\n                <div class=\"w-100\">\n                <b-button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    class=\"float-left text-white\"\n                    @click=\"resetModal\"\n                >\n                    Đóng\n                </b-button>\n                <b-button\n                    variant=\"warning\"\n                    size=\"sm\"\n                    class=\"float-right SendRequestCreateDrug text-white\"\n                    @click=\"checkform('add')\"\n                >\n                    <img src=\"@/assets/images/send.svg\" /> Thêm Thuốc\n                </b-button>\n                </div>\n            </template>\n        </b-modal>\n\n        <b-modal id=\"modal-modify\" size='lg' ref=\"modal-modify\" title=\"Thêm Thuốc\">\n            <div>\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Tên Thuốc</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"LoadListDrug\" v-model=\"infoModal.tenThuoc\" class=\"width-100 style_input\">\n                        <datalist id=\"LoadListDrug\">\n                            <option v-for=\"(drug,index) in tenThuocSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div> \n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Hoạt Chất</p>\n                    <span class=\"col-sm-8\"><input list=\"ListHoatChat\"  type=\"text\" v-model=\"infoModal.hoatChat\" class=\"width-100 style_input\"></span>\n                    <datalist id=\"ListHoatChat\">\n                        <option v-for=\"(drug,index) in hoatChatSystem\" :key=\"index\">{{drug}}</option>\n                    </datalist>\n                </div>\n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Nồng Độ/Hàm Lượng</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"ListNongDo\" v-model=\"infoModal.nongDo\" class=\"width-100 style_input\">\n                        <datalist id=\"ListNongDo\">\n                            <option v-for=\"(drug,index) in nongDoSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div>\n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Dạng Bào Chế</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"ListBaoChe\" v-model=\"infoModal.baoChe\" class=\"width-100 style_input\">\n                        <datalist id=\"ListBaoChe\">\n                            <option v-for=\"(drug,index) in baoCheSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div>\n\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Hạn Sử Dụng</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" list=\"ListTuoiTho\" v-model=\"infoModal.tuoiTho\" class=\"width-100 style_input\">\n                        <datalist id=\"ListTuoiTho\">\n                            <option v-for=\"(drug,index) in tuoiThoSystem\" :key=\"index\">{{drug}}</option>\n                        </datalist>\n                    </span>\n                </div>\n                <div class=\"my-2 d-flex\">\n                    <p class=\"col-sm-4 title_editor\">Công Ty Sản Xuất</p>\n                    <span class=\"col-sm-8\">\n                        <input type=\"text\" v-model=\"infoModal.congTySx\" autocomplete=\"on\" class=\"width-100 style_input\">\n                    </span>\n                </div>\n            </div>\n            <template v-slot:modal-footer>\n                <div class=\"w-100\">\n                <b-button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    class=\"float-left text-white\"\n                    @click=\"CloseModalModify\"\n                >\n                    Đóng\n                </b-button>\n                <b-button\n                    variant=\"warning\"\n                    size=\"sm\"\n                    class=\"float-right SendRequestCreateDrug text-white\"\n                    @click=\"checkform('modify')\"\n                >\n                    <img src=\"@/assets/images/send.svg\" /> Gửi Yêu Cầu Sửa Thông Tin\n                </b-button>\n                </div>\n            </template>\n        </b-modal>\n    </div>\n    \n</template>\n\n<script>\nimport HospitalService from '@/services/HospitalService'\nimport axios from 'axios';\nexport default {\n    data(){\n        return{\n            listSystem:'',\n            listDrug:[],\n            tenThuocSystem:'',\n            hoatChatSystem:'',\n            nongDoSystem:'',\n            baoCheSystem:'',\n            tuoiThoSystem:'',\n            selected:'',\n            infoModal: {\n                tenThuoc: '',\n                hoatChat: '',\n                baoChe:'',\n                nongDo:'',\n                tuoiTho:'',\n                congTySx:'',\n                id:''\n            },\n            user:'',\n            totalRows: 1,\n            currentPage: 1,\n            perPage: 5,\n            pageOptions: [5, 10, 15],\n            filter: null,\n            fields: [\n                { key: 'tenThuoc', label: 'Tên Thuốc', sortable: true, sortDirection: 'desc' },\n                { key: 'hoatChat', label: 'Hoạt Chất', sortable: true},\n                { key: 'baoChe', label: 'Dạng Bào Chế', sortable: true, sortDirection: 'desc' },\n                { key: 'nongDo', label: 'Nồng Độ', sortable: true, sortDirection: 'desc' },\n                { key: 'tuoiTho', label: 'Hạn Sử Dụng', sortable: true, sortDirection: 'desc' },\n                { key: 'actions', label: 'Actions', class: 'd-flex justify-content-center ' }\n            ],\n        }\n    },\n    async created(){\n        this.fetchdata();\n        const user = await localStorage.getItem(\"user\");\n        const userJSON = await JSON.parse(user)\n        this.user = await userJSON;\n        const roles = userJSON.roles\n        this.listDrug = (await HospitalService.getListDrugBank(userJSON.id)).data;\n        this.totalRows = this.listDrug.length\n    },\n    methods:{\n        CloseModalModify(){\n            this.$refs['modal-modify'].hide();\n        },\n        showModalModifyDrug(item,index,button){\n            this.infoModal.tenThuoc = item.tenThuoc;\n            this.infoModal.hoatChat = item.hoatChat;\n            this.infoModal.baoChe = item.baoChe;\n            this.infoModal.nongDo = item.nongDo;\n            this.infoModal.tuoiTho = item.tuoiTho;\n            this.infoModal.congTySx = item.congtySx;\n            this.infoModal.id = item.id;\n            this.$refs['modal-modify'].show();\n\n        },\n        async deleteDrug(item,index,button){\n            if(this.user.id){\n                try {\n                    await HospitalService.SendRequestDeleteDrug({\n                        id:item.id,\n                    })\n                    if (~index) \n                        this.listDrug.splice(index, 1)\n                    this.$toasted.show('Xóa Thành Công !!!', { \n                        theme: \"bubble\",\n                        position: \"bottom-right\", \n                        duration : 4000\n                    });\n                }catch (error) {\n                        this.$toasted.show(`${error.response.data.error}`, { \n                            theme: \"toasted-primary\",\n                            position: \"bottom-center\", \n                            duration : 4000\n                    });\n                }\n            }\n        },\n        checkform(route){\n            if(!this.infoModal.tenThuoc && !this.infoModal.hoatChat && !this.infoModal.baoChe && !this.infoModal.nongDo && !this.infoModal.tuoiTho && !this.infoModal.congTySx ){\n                this.$toasted.show('Vui Lòng Nhập Đầy Đủ Thông Tin !!!', { \n                    theme: \"toasted-primary\",\n                    position: \"bottom-center\", \n                    duration : 4000\n                });\n            }else{\n                if(route === 'add'){\n                    this.SendRequestCreateDrug();\n                }else{\n                    this.SendRequestModifyDrug();\n                }\n            }\n        },\n        async SendRequestModifyDrug(){\n            if(this.user.id){\n                try {\n                    await HospitalService.SendRequestModifyDrug({\n                        id:this.infoModal.id,\n                        id_hospital: this.user.id,\n                        tenThuoc: this.infoModal.tenThuoc,\n                        hoatChat: this.infoModal.hoatChat,\n                        baoChe:this.infoModal.baoChe,\n                        nongDo:this.infoModal.nongDo,\n                        tuoiTho:this.infoModal.tuoiTho,\n                        congTySx:this.infoModal.congTySx,\n                    })\n                    this.$toasted.show(`Cập Nhật Thành Công`, { \n                        theme: \"toasted-primary\",\n                        position: \"bottom-center\", \n                        duration : 4000\n                    });\n                    this.listDrug.filter(x=>x.id == this.infoModal.id).map((item) => {\n                        item.tenThuoc = this.infoModal.tenThuoc;\n                        item.hoatChat = this.infoModal.hoatChat;\n                        item.baoChe = this.infoModal.baoChe;\n                        item.nongDo = this.infoModal.nongDo;\n                        item.tuoiTho = this.infoModal.tuoiTho;\n                        item.congTySx = this.infoModal.congTySx;\n                    })\n                    this.CloseModalModify();\n                }catch (error) {\n                        this.$toasted.show(`${error.response.data.error}`, { \n                            theme: \"toasted-primary\",\n                            position: \"bottom-center\", \n                            duration : 4000\n                    });\n                }\n            }\n        },\n        async SendRequestCreateDrug(){\n            if(this.user.id){\n                try {\n                    await HospitalService.SendRequestCreateDrugbank({\n                        id_hospital: this.user.id,\n                        tenThuoc: this.infoModal.tenThuoc,\n                        hoatChat: this.infoModal.hoatChat,\n                        baoChe:this.infoModal.baoChe,\n                        nongDo:this.infoModal.nongDo,\n                        tuoiTho:this.infoModal.tuoiTho,\n                        congTySx:this.infoModal.congTySx,\n                    })\n                    this.$toasted.show(`Thêm Thuốc mới thành công`, { \n                        theme: \"toasted-primary\",\n                        position: \"bottom-center\", \n                        duration : 4000\n                    });\n                }catch (error) {\n                        this.$toasted.show(`${error.response.data.error}`, { \n                            theme: \"toasted-primary\",\n                            position: \"bottom-center\", \n                            duration : 4000\n                    });\n                }\n                this.resetModal();\n            }\n          \n        },\n        resetModal(){\n            this.$refs['modal-add'].hide();\n            this.infoModal = '';\n        },\n        onFiltered(filteredItems) {\n            this.totalRows = filteredItems.length\n            this.currentPage = 1\n        },\n        async fetchdata(){\n            await axios\n                .get('https://www.drugbank.vn/services/drugbank/api/public/thuoc?page=1&size=2000&fbclid=IwAR1vamwLTdSmIx8idqXMjg77a18AZ4nZYROoLE8dTTAR0sS4EUlvt7W3lMQ')\n                .then(response => (this.listSystem = response.data.filter(x=>x).map(x=>x)));\n            this.tenThuocSystem = [...new Set(this.listSystem.map(x=>x.tenThuoc))]\n            this.hoatChatSystem = [...new Set(this.listSystem.map(x=>x.hoatChat))] \n            this.nongDoSystem = [...new Set(this.listSystem.map(x=>x.nongDo))]\n            this.baoCheSystem = [...new Set(this.listSystem.map(x=>x.baoChe))] \n            this.tuoiThoSystem =[...new Set(this.listSystem.map(x=>x.tuoiTho))] \n        }\n    }\n    \n}\n\n</script>\n\n<style scoped>\n.title_editor{\n  font-weight: bold;\n  color:tomato;\n}\n.style_input{\n  border: 1px solid rgba(0,0,0,.54);\n  border-radius: 2px;\n  padding:0.25rem;\n}\n.width-100{\n  width: 100%;\n}\n.SendRequestCreateDrug img{\n    height:1rem;\n    width:1rem;\n}\n</style>\n"]}]}
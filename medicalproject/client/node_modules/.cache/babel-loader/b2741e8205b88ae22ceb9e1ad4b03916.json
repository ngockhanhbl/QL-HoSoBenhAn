{"remainingRequest":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/UpdateInformationRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/UpdateInformationRegister.vue","mtime":1570332192000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AuthenticationService from '@/services/AuthenticationService';\nimport { mapGetters } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      id_account: '',\n      roles: 1,\n      checked: false,\n      url: null,\n      error: '',\n      firstname: '',\n      lastname: '',\n      day: '',\n      month: '',\n      year: '',\n      phone: '',\n      sex: '',\n      address: '',\n      cmnd: '',\n      user: null\n    };\n  },\n  // async beforeMount() {\n  //     console.log('mouted ');\n  //     const user = await localStorage.getItem('user');\n  //     this.user = user;\n  //     console.log(this.user)\n  // },\n  computed: {\n    right: {\n      get: function get() {\n        return this.$store.getters.right;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updateInformation\", {\n          payloadValue: payload,\n          payloadRouter: 'right'\n        });\n      }\n    },\n    valueRight: {\n      get: function get() {\n        return this.$store.getters.valueRight;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updateInformation\", {\n          payloadValue: payload,\n          payloadRouter: 'valueRight'\n        });\n      }\n    }\n  },\n  methods: {\n    onFileChange: function onFileChange(e) {\n      var file = e.target.files[0];\n      state.url = URL.createObjectURL(file);\n    },\n    updatedInforUser: function () {\n      var _updatedInforUser = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var userCONST, userID, response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                userCONST = JSON.parse(localStorage.getItem('user'));\n                this.user = userCONST;\n                userID = JSON.parse(localStorage.getItem('user')).id;\n                _context.prev = 3;\n\n                if (!userID) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 7;\n                return AuthenticationService.patient({\n                  id_account: userID,\n                  firstname: this.firstname,\n                  lastname: this.lastname,\n                  day: this.day,\n                  month: this.month,\n                  year: this.year,\n                  address: this.address,\n                  sex: this.sex,\n                  cmnd: this.cmnd,\n                  right: this.valueRight,\n                  phone: this.phone,\n                  image: this.url\n                });\n\n              case 7:\n                response = _context.sent;\n                console.log(response.data); //update field isUpdateInformation\n\n                _context.next = 11;\n                break;\n\n              case 11:\n                this.resetRegiserPatient();\n                this.$router.push({\n                  name: 'patient',\n                  params: {\n                    id: userID\n                  }\n                });\n                this.$store.dispatch(\"resetRight\");\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](3);\n                this.$toasted.show(\"\".concat(_context.t0.response.data.error), {\n                  theme: \"toasted-primary\",\n                  position: \"bottom-right\",\n                  duration: 5000\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 16]]);\n      }));\n\n      function updatedInforUser() {\n        return _updatedInforUser.apply(this, arguments);\n      }\n\n      return updatedInforUser;\n    }(),\n    resetRegiserPatient: function resetRegiserPatient() {\n      this.checked = false, this.right = false, this.url = null, this.error = '', this.firstname = '', this.lastname = '', this.day = '', this.month = '', this.year = '', this.phone = '', this.sex = '', this.address = '', this.cmnd = '', this.valueRight = '';\n    }\n  }\n};",{"version":3,"sources":["UpdateInformationRegister.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"pt-5 bg pb-5 bg\" \n    :style=\"{\n        'background-image':\n          'url(' + require('@/assets/images/homeregister.jpg') + ') '\n      }\">\n        <form action=\"\" id=\"registerform\">\n            <div class=\"main_register m-auto \">\n                <div class=\"logo auto m-auto d-flex justify-content-center p_1r\"><img src=\"@/assets/images/logo705.png\"></div>\n                <div class=\"title auto m-auto d-flex justify-content-center p_1r \"><strong>Mẫu Cập Nhật Thông Tin Bệnh Nhân</strong></div>\n                <div class=\"register\">\n                    <div class=\"infor p_1r mlr_1-5r\">\n                        <h5>Vui Lòng Cập Nhật Thông Tin</h5>\n                    </div>\n                        <div class=\"formCus p_1r mlr_1-5r\">\n                            <div class=\"block\">Tên</div>\n                            <div class=\" Custominput pr2\"    >\n                                <input type=\"text\" placeholder=\"Họ và Tên Lót\" style=\"width:100%;\"  v-model=\"firstname\">\n                            </div>\n                            <div class=\" Custominput pl2\"   >\n                                <input type=\"text\" placeholder=\"Tên\" style=\"width:100%;\" v-model=\"lastname\">\n                            </div>\n\n                            <div class=\"block\">Ngày Sinh</div>\n                            <div class=\" Custominput2 pr2\"    >\n                                <input type=\"number\" min=\"1\" max=\"31\" placeholder=\"Ngày\" style=\"width:100%;\" v-model=\"day\" >\n                            </div>\n                            <div class=\" Custominput2 pl2\" >\n                                <input type=\"number\" min=\"1\" max=\"12\" placeholder=\"Tháng\" style=\"width:100%;\" v-model=\"month\">\n                            </div>\n                            <div class=\" Custominput2 pl2\"   >\n                                <input type=\"number\" max=\"2019\" placeholder=\"Năm\" style=\"width:100%;\" v-model=\"year\">\n                            </div>\n                            <div class=\"block\">Số Điện Thoại</div>\n                            <div class=\" Custominput3 pr2\"    >\n                                <input type=\"text\"  style=\"width:100%;\"  v-model=\"phone\">\n                            </div>\n                            <div class=\"Custominput \">\n                                Giới Tính:&emsp;\n                                <input type=\"radio\" name=\"gender\" value=\"nam\" v-model=\"sex\"> Nam&ensp; \n                                <input type=\"radio\" name=\"gender\" value=\"nu\" v-model=\"sex\"> Nữ\n                            </div>\n \n                            <div class=\"block\">Địa Chỉ</div>\n                            <div class=\" Custominput3 pr2\"    >\n                                <input type=\"text\"  style=\"width:100%;\" v-model=\"address\" >\n                            </div>\n                            <div class=\"block\">CMND</div>\n                            <div class=\" Custominput pr2\"   >\n                                <input type=\"text\"  style=\"width:100%;\" :disabled=\"checked\" v-model=\"cmnd\">\n                            </div>\n                            <div class=\" Custominput pl-2 float-right\">\n                                <input type=\"checkbox\" class=\"form-check-input\" id=\"exampleCheck1\" v-model=\"checked\">\n                                <label class=\"form-check-label\" for=\"exampleCheck1\">tôi dưới 14 tuổi</label>\n                            </div>\n                        <div class=\"block mt-5\">Tôi muốn chế độ hồ sơ bệnh án của mình ở chế độ:</div>\n                            <div class=\" Custominput3 pr2\"    >\n                                <div class=\"block\"><input type=\"radio\" name=\"right\" value=\"public\" v-model=\"right\">&ensp; Công khai</div>                         \n                                <div class=\"block pt-1\">\n                                    <input type=\"radio\" name=\"right\" value=\"private\" v-model=\"right\">&ensp; Riêng tư\n                                    <transition name=\"fade\">\n                                        <span class=\"pl-3\" v-if=\"right\">Mã cấp quyền: </span>\n                                    </transition>\n                                    <transition name=\"fade\">\n                                        <input type=\"text\"  style=\"width:60%;\"   v-model=\"valueRight\" v-if=\"right\">\n                                    </transition>\n                                </div>\n                                \n                            </div>\n                            <div class=\"agree_label\">\n                                <div class=\"block\">Chọn hình ảnh CMND / sổ hộ khẩu</div>\n                                <div class=\" Custominput pr2\"    >\n                                        <input type=\"file\" @change=\"onFileChange\" />\n                                </div>\n                                <div class=\" Custominput pl2\" >\n                                    <img v-if=\"url\" :src=\"url\" />\n                                </div>\n                            </div>\n                            <br>\n                            <div class=\"danger-alert\" v-html=\"error\" />\n                            <br>    \n                            <div class=\"agree_btn btn\" @click=\"updatedInforUser\"> ĐỒNG Ý</div>                              \n                        </div>\n                        \n                </div>\n            </div>\n        </form>        \n    </div>\n</template>\n\n<script>\nimport AuthenticationService from '@/services/AuthenticationService'\nimport { mapGetters} from \"vuex\";\nexport default {\n    data(){\n        return{\n            id_account:'',\n            roles:1,\n            checked : false,\n            url: null,\n            error:'',\n            firstname:'',\n            lastname:'',\n            day:'',\n            month:'',\n            year:'',\n            phone:'',\n            sex:'',\n            address:'',\n            cmnd:'',\n            user:null\n        }\n    },\n    // async beforeMount() {\n    //     console.log('mouted ');\n    //     const user = await localStorage.getItem('user');\n    //     this.user = user;\n    //     console.log(this.user)\n    // },\n    computed: {\n        right: {\n           get(){\n               return this.$store.getters.right\n            },\n           set(payload){\n                this.$store.dispatch(\"updateInformation\",{\n                    payloadValue: payload,\n                    payloadRouter:'right'\n                } );\n           }\n        },\n        valueRight: {\n           get(){\n               return this.$store.getters.valueRight\n            },\n           set(payload){  \n                this.$store.dispatch(\"updateInformation\",{\n                    payloadValue: payload,\n                    payloadRouter:'valueRight'\n                } );\n           }\n       },\n    },\n    methods: {\n        onFileChange(e) {\n            const file = e.target.files[0];\n            state.url = URL.createObjectURL(file);\n        },\n        async updatedInforUser(){\n            const userCONST = JSON.parse(localStorage.getItem('user'));\n            this.user = userCONST\n\n            const userID = JSON.parse(localStorage.getItem('user')).id;\n            \n            try {\n                if(userID){  //coi lai cho nay, vi sao khong vo ? // theem console.log cho modifiinformation\n                    const response = await AuthenticationService.patient({\n                        id_account:userID,\n                        firstname:this.firstname,\n                        lastname:this.lastname,\n                        day:this.day,\n                        month:this.month,\n                        year:this.year,\n                        address:this.address,\n                        sex:this.sex,\n                        cmnd:this.cmnd,\n                        right:this.valueRight,\n                        phone:this.phone,\n                        image:this.url,\n                    })\n                    console.log(response.data)\n                    //update field isUpdateInformation\n                }else{\n                    //do some thing\n                }\n\n                this.resetRegiserPatient();\n                this.$router.push({\n                    name:'patient',\n                    params:{id: userID}\n                })\n                this.$store.dispatch(\"resetRight\")             \n            }catch (error) {             \n                this.$toasted.show(`${error.response.data.error}`, { \n                    theme: \"toasted-primary\", \n                    position: \"bottom-right\", \n                    duration : 5000\n                });\n            }\n        },\n        resetRegiserPatient() {\n            this.checked = false,\n            this.right= false, \n            this.url= null,\n            this.error='',\n            this.firstname='',\n            this.lastname='',\n            this.day='',\n            this.month='',\n            this.year='',\n            this.phone='',\n            this.sex='',\n            this.address='',\n            this.cmnd='',\n            this.valueRight=''\n        },\n    }\n}\n\n</script>\n\n<style scoped>\n\n*{\n    font-size: 14px;\n    font-family: \"Roboto\",\"Helvetica\",\"Arial\",sans-serif;\n    color: rgba(0,0,0,.54);\n    \n}\n.bg{\n    background-repeat: no-repeat;\n    background-size: cover;\n}\n.block{\n    display:block;\n}\n.main_register{\n    max-width: 800px;\n    width: 100%;\n    background:white;\n    position: relative;\n    z-index: 1;\n    border-radius: 2px;\n    background: white;\n}\n.p_1r{\n    padding: 1rem;\n}\n.mlr_1-5r{\n    margin: 0 1.5rem;\n}\n.infor h5{\n    margin: 1.5rem 0 1rem;\n}\n.pl2{\n    padding-left: 2px;\n}\n.pr2{\n    padding-right:2px;\n}\n.formCus{\n    width:90%;\n}\n.Custominput{\n    display: inline-block;\n    width: 49%;\n    padding-top:1.2rem;\n    padding-bottom:1.2rem;\n}\n.Custominput img {\n  max-width: 100%;\n  max-height: 500px;\n}\n.Custominput2{\n    display: inline-block;\n    width: 24.5%;\n    padding-top:1.2rem;\n    padding-bottom:1.2rem;\n}\n.Custominput2:last-child{\n    width: 49%;\n}\n.Custominput3{\n    width: 100%;\n    padding-top:1.2rem;\n    padding-bottom:1.2rem;\n    display: block;\n}\ninput{\n    border: none;\n    border-bottom: 1px solid rgba(0,0,0,.12);\n    padding: 5px 0;\n}\n.title strong{\n    font-size: 1.3rem;\n}\n.agree_label{\n    border-bottom: 1px solid rgba(0,0,0,.12);\n    padding: 1.2rem 0;\n}\n.agree_btn{\n    border: 1px solid #53c9ff;\n    border-radius: 2px;\n    background: #53c9ff;\n    margin: 1.2rem 0 0;\n    display: block;\n    width: 6rem;\n    color:#3b3b3b;\n}\n.agree_btn:hover{\n    cursor: pointer;\n}\ninput:focus::-webkit-input-placeholder {\n    color: gray;\n}\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n.danger-alert{\n    color:red;\n}\np{\n    line-height: 24px;\n}\n</style>\n\n"],"sourceRoot":"src/components/content"}]}
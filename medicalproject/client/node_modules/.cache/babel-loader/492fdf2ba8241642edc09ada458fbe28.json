{"remainingRequest":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/thread-loader/dist/cjs.js!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/Doctor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/Doctor.vue","mtime":1569330022000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from \"vuex\";\nimport DoctorService from '@/services/DoctorService';\nimport PatientView from '@/components/content/patient_modules/PatientView.vue';\nimport PatientData from '@/components/content/patient_modules/PatientData.vue';\nimport PatientService from '@/services/PatientService';\nimport HospitalService from '@/services/HospitalService';\nexport default {\n  data: function data() {\n    return {\n      messageError: '',\n      doctor_email_record: '',\n      doctor_right_record: '',\n      isWriteRecord: false,\n      error_access_record: null,\n      titleRecord: '',\n      diagnoseRecord: '',\n      errors: null,\n      Istruycap: false,\n      idRecord: null,\n      describe: '',\n      NewDrugs: [{\n        name: '',\n        id_record: '',\n        total: '',\n        morning: '',\n        midday: '',\n        afternoon: '',\n        night: '',\n        note: ''\n      }],\n      files: [],\n      isHideNewAlternativeRecord: true\n    };\n  },\n  computed: _objectSpread({}, mapGetters([\"user\", \"patient_records\", \"doctorInfo\", \"hospitalInfo\", \"patientInfo\"])),\n  components: {\n    \"app-TimeLine\": PatientView,\n    \"app-PatientData\": PatientData\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var id_account, payload_doctor, payload_hospital;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id_account = this.user.id;\n              _context.next = 3;\n              return DoctorService.getInfoDoctor(id_account);\n\n            case 3:\n              payload_doctor = _context.sent.data;\n              this.$store.dispatch(\"setDoctorInfo\", payload_doctor);\n              _context.next = 7;\n              return HospitalService.getInfoHospital(payload_doctor.id_hospital);\n\n            case 7:\n              payload_hospital = _context.sent.data;\n              this.$store.dispatch(\"setHospitalInfo\", payload_hospital);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  methods: {\n    addFiles: function addFiles() {\n      this.$refs.files.click();\n    },\n    checkForm: function checkForm(e) {\n      if (this.titleRecord && this.diagnoseRecord) {\n        this.save();\n      }\n\n      this.errors = '';\n\n      if (!this.titleRecord) {\n        this.errors += 'Vui lòng nhập triệu chứng, lý do. <br> ';\n      }\n\n      if (!this.diagnoseRecord) {\n        this.errors += 'Vui lòng nhập chẩn đoán.';\n      }\n\n      var toast = this.$toasted.show(\"\".concat(this.errors), {\n        theme: \"bubble\",\n        position: \"bottom-right\",\n        duration: 2000\n      });\n      this.errors = '';\n    },\n    handleFilesUpload: function handleFilesUpload() {\n      var allowedTypes = ['image/jpeg', 'image/png', \"image/gif\", 'image/svg'];\n      var isError = true;\n      this.messageError = \"\";\n      var checkFilesUpload = this.$refs.files.files;\n      var vm = this; // validate file\n\n      for (var i = 0; i < checkFilesUpload.length; i++) {\n        if (allowedTypes.includes(checkFilesUpload[i].type)) {\n          isError = false;\n        } else {\n          this.messageError = \"Định dạng không cho phép\\nĐịnh dạng hình ảnh bao gồm image/jpeg || image/png || image/gif  \";\n        }\n      }\n\n      if (!isError) {\n        var uploadedFiles = this.$refs.files.files;\n\n        var _loop = function _loop() {\n          var reader = new FileReader();\n\n          reader.onload = function () {\n            vm.files.push({\n              image: reader.result,\n              file: reader.fileName\n            });\n          };\n\n          reader.fileName = uploadedFiles[i].name;\n          reader.readAsDataURL(uploadedFiles[i]);\n        };\n\n        for (var i = 0; i < uploadedFiles.length; i++) {\n          _loop();\n        }\n      }\n    },\n    removeFile: function removeFile(key) {\n      this.files.splice(key, 1);\n    },\n    removeImage: function removeImage(key) {\n      this.files.splice(key, 1);\n    },\n    close: function close() {\n      this.messageError = \"\";\n      this.$root.$emit('bv::hide::modal', 'modal-1', '#btnShow');\n    },\n    addNewDrugRecord: function addNewDrugRecord() {\n      this.NewDrugs.push({\n        name: '',\n        id_record: '',\n        total: '',\n        morning: '',\n        midday: '',\n        afternoon: '',\n        night: '',\n        note: ''\n      });\n    },\n    removeNewDrugRecord: function removeNewDrugRecord(index) {\n      this.NewDrugs.splice(index, 1);\n    },\n    refresh: function refresh() {\n      this.doctor_email_record = '';\n      this.doctor_right_record = '';\n    },\n    getUserRecords: function () {\n      var _getUserRecords = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var response, _patientrecords;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return DoctorService.getUserRecords({\n                  email: this.doctor_email_record,\n                  right: this.doctor_right_record\n                });\n\n              case 3:\n                response = _context2.sent.data;\n                this.$store.dispatch(\"set_patientInfo\", response);\n                _context2.next = 7;\n                return PatientService.show(response.id_account);\n\n              case 7:\n                _patientrecords = _context2.sent.data;\n                this.$store.dispatch(\"update_inforRecordsPatientDetail\", _patientrecords);\n                this.isWriteRecord = true;\n                this.Istruycap = true;\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](0);\n                this.error_access_record = _context2.t0.response.data.error;\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 13]]);\n      }));\n\n      function getUserRecords() {\n        return _getUserRecords.apply(this, arguments);\n      }\n\n      return getUserRecords;\n    }(),\n    end: function end() {\n      this.Istruycap = false;\n      this.messageError = \"\", this.isWriteRecord = false;\n      this.$store.dispatch(\"resetPatient_records\");\n      localStorage.removeItem('patient_records');\n    },\n    resetForm: function resetForm() {\n      this.doctor_email_record = '', this.doctor_right_record = '', // this.isWriteRecord=false,\n      this.error_access_record = null, this.titleRecord = '', this.diagnoseRecord = '', // this.Istruycap = false,\n      this.errors = [], this.idRecord = null, this.NewDrugs = [{\n        name: '',\n        id_record: '',\n        total: '',\n        morning: '',\n        midday: '',\n        afternoon: '',\n        night: '',\n        note: ''\n      }];\n      this.describe = '', this.files = [], this.isHideNewAlternativeRecord = true;\n      this.$root.$emit('bv::hide::modal', 'modal-1', '#btnShow');\n    },\n    save: function () {\n      var _save = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _this = this;\n\n        var response, length, _response, _length, _response2, toast;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return DoctorService.saveRecord({\n                  id_patient: this.patientInfo.id_account,\n                  id_doctor: this.user.id,\n                  patient_title: this.titleRecord,\n                  patient_location: this.hospitalInfo.name_hospital,\n                  patient_time: new Date().toISOString().slice(0, 10),\n                  patient_content: this.diagnoseRecord\n                });\n\n              case 3:\n                response = _context3.sent.data;\n                this.idRecord = response.id;\n                this.NewDrugs.forEach(function (element) {\n                  element.id_record = _this.idRecord;\n                });\n                _context3.next = 11;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](0);\n                this.error = _context3.t0.response.data.error;\n\n              case 11:\n                if (!this.NewDrugs) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                _context3.prev = 12;\n                length = this.NewDrugs.length;\n                _context3.next = 16;\n                return DoctorService.saveDrugRecord({\n                  objects_drug: this.NewDrugs,\n                  length: length\n                });\n\n              case 16:\n                _response = _context3.sent;\n                _context3.next = 22;\n                break;\n\n              case 19:\n                _context3.prev = 19;\n                _context3.t1 = _context3[\"catch\"](12);\n                this.error = _context3.t1.response.data.error;\n\n              case 22:\n                if (!this.files) {\n                  _context3.next = 33;\n                  break;\n                }\n\n                _context3.prev = 23;\n                _length = this.files.length;\n                _context3.next = 27;\n                return DoctorService.saveAlternativeRecords({\n                  objects_files: this.files,\n                  describe: this.describe,\n                  id_record: this.idRecord,\n                  length: _length\n                });\n\n              case 27:\n                _response2 = _context3.sent;\n                _context3.next = 33;\n                break;\n\n              case 30:\n                _context3.prev = 30;\n                _context3.t2 = _context3[\"catch\"](23);\n                this.error = _context3.t2.response.data.error;\n\n              case 33:\n                toast = this.$toasted.show(\"Th\\xE0nh c\\xF4ng !!\", {\n                  theme: \"bubble\",\n                  position: \"bottom-right\",\n                  duration: 2000\n                });\n                this.resetForm();\n\n              case 35:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 8], [12, 19], [23, 30]]);\n      }));\n\n      function save() {\n        return _save.apply(this, arguments);\n      }\n\n      return save;\n    }()\n  }\n};",{"version":3,"sources":["Doctor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container pt-5 mb-5\">\n    <div class=\"search\" v-bind:class=\"{ CenterCSS: !this.Istruycap }\">\n      <h3 class=\"text-center title\">TÌM KIẾM BỆNH NHÂN  testing@gmail.com</h3>\n      <div class=\"content m-auto\">\n        <div class=\"col-md-12 col-sm-12 row\" v-if=\"isWriteRecord\">\n          <div class=\"p-2 col-sm-6 text-right\">\n            <!-- THEM HO SO MOI -->\n               <div class=\"btn btn-success\" v-b-modal.modal-1>Thêm mới hồ sơ </div>\n               \n               <b-modal id=\"modal-1\" title=\"Thêm bệnh án bệnh nhân\">\n                 <div class=\"row col-sm-12\">\n                    <div class=\"col-sm-4 p-2\">Triệu chứng, lý do</div>\n                    <div class=\"col-sm-8 p-2\">\n                       <input type=\"text\"  style=\"width:100%;\"  v-model=\"titleRecord\" class=\"pl-1\">\n                    </div>\n                 </div>\n                <div class=\"row col-sm-12\">\n                    <div class=\"col-sm-4 p-2\">Chẩn đoán</div>\n                    <div class=\"col-sm-8 p-2\">\n                       <input type=\"text\"  style=\"width:100%;\"  v-model=\"diagnoseRecord\" class=\"pl-1\">\n                    </div>\n                 </div>\n                <div class=\"row col-sm-12 text-left\">\n                  <div class=\"col-sm-12 d-flex\">\n                      <div class=\"add pb-3\" @click=\"addNewDrugRecord\">\n                        <img src=\"@/assets/images/plus.svg\" />\n                      </div>\n                      <div class=\"add add2 pb-3 pl-4\" @click=\"isHideNewAlternativeRecord = false \" v-show='isHideNewAlternativeRecord'>\n                        <img src=\"@/assets/images/add-image.svg\" />\n                      </div>\n                  </div>\n            <span style=\"width:100%\"  v-if=\"!isHideNewAlternativeRecord\">\n              <div class=\"form col-sm-12 col-md-12 mb-2\">\n                    <div class=\"row pb-2 mx-1 justify-content-between\">\n                      <strong class=\"colorFile\">File Image </strong>\n                      <div class=\"close\" @click=\"isHideNewAlternativeRecord = true, messageError = '' \">x</div>\n                    </div>\n                      <div class=\"row pb-2\">\n                            <div class=\"col-sm-3\">\n                              <label>Chọn File <input type=\"file\" multiple ref=\"files\" id=\"files\" accept=\"image/*\" @change=\"handleFilesUpload()\" /></label>\n                            </div> \n                            <div class=\"col-sm-9\">\n                              <button v-on:click=\"addFiles()\">Add Files</button>\n                            </div>\n                            <div class=\"alert-error p-2\" v-if=\"messageError\">{{messageError}}</div>\n                      </div>\n  <hr>                   \n                      <div class=\"row\">\n                            <div class=\"col-sm-12\">\n                              <textarea v-model=\"describe\" placeholder=\"Mô tả\"></textarea>\n                            </div>\n                      </div>\n  <hr>                   \n                      <div class=\"row mx-1\" v-if=\"files\">\n                        <div v-for=\"(file, key) in files\" class=\"file-listing d-flex justify-content-between py-1 d-block\">          \n                            <img class=\"preview\" :src=\"file.image\" />\n                             <span class=\"d-flex align-items-center name-preview\">{{ file.file }}</span>\n                             <span class=\"d-flex align-items-center btn btn-sm btn-warning pointer \" @click=\"removeImage( key )\">\n                               Xóa\n                             </span>\n                        </div>\n                      </div>\n                    </div>\n              </span>\n\n                  <div class=\"form col-sm-12 col-md-12 mb-2\" v-for=\"(newDrug,index) in NewDrugs\" :key=\"index +'-key'\">\n                    <!-- <div class=\"row justify-content-end mr-3 \"></div> -->\n                  <div class=\"row pb-2 mx-1 justify-content-between\">\n                    <strong class=\"colorDrug\">STT Drug {{index+1}}</strong>\n                    <div class=\"close\" @click=\"removeNewDrugRecord(index)\">x</div>\n                  </div>\n                    <div class=\"row pb-2\">\n                          <div class=\"col-sm-3\">Tên thuốc</div>\n                          <div class=\"col-sm-9\">\n                            <input type=\"text\"  style=\"width:100%;\"  v-model=\"newDrug.name\" class=\"pl-1\">\n                          </div>                   \n                    </div>\n                    <div class=\"row\">\n                          <div class=\"col-sm-3\">Số lượng</div>\n                          <div class=\"col-sm-9 \">\n                            <input type=\"number\" min=\"0\"  style=\"width:100%;\"   v-model=\"newDrug.total\" class=\"pl-1\">\n                          </div>\n                    </div> \n<hr>\n                    <div class=\"row\">\n                          <div class=\"col-sm-3\">\n                             <input type=\"text\"  style=\"width:100%;\"   v-model=\"newDrug.morning\" placeholder=\"Sáng\">\n                          </div>\n                          <div class=\"col-sm-3\">\n                             <input type=\"text\"  style=\"width:100%;\"   v-model=\"newDrug.midday\" placeholder=\"Trưa\">\n                          </div>\n                          <div class=\"col-sm-3\">\n                             <input type=\"text\"  style=\"width:100%;\"   v-model=\"newDrug.afternoon\" placeholder=\"Chiều\">\n                          </div>\n                          <div class=\"col-sm-3\">\n                             <input type=\"text\"  style=\"width:100%;\"   v-model=\"newDrug.night\" placeholder=\"Tối\">\n                          </div>\n                    </div> \n<hr>                   \n                    <div class=\"row\">\n                          <div class=\"col-sm-12\">\n                            <textarea v-model=\"newDrug.note\" placeholder=\"Ghi chú\"></textarea>\n                          </div>\n                    </div>\n                  </div>\n                </div>\n                    <template slot=\"modal-footer\">\n                      <b-button size=\"sm\" variant=\"success\" @click=\"checkForm()\">\n                        Lưu hồ sơ\n                      </b-button>\n                      <b-button size=\"sm\" variant=\"danger\" @click=\"close()\">\n                        Hủy{{this.NewDrugs.id_record}}\n                      </b-button>\n                    </template>\n                \n               </b-modal>\n               \n          </div>\n          <div class=\"p-2 col-sm-6\">\n             <b-button variant=\"secondary\" @click=\"end\">Kết thúc</b-button>\n          </div>\n        </div>\n        <span v-else>\n            <div class=\"col-md-12 col-sm-12 row\">\n              <div class=\"pb-3 col-sm-12 text-right\">Xin chào bác sĩ {{doctorInfo.firstname}} {{doctorInfo.lastname}}</div>\n            \n            </div>\n            <div class=\"col-md-12 col-sm-12 row\">\n              <div class=\"p-2 col-sm-6 text-right\">Nhập username bệnh nhân:</div>\n              <div class=\"p-2 col-sm-6\"><input type=\"text\" style=\"width:60%;\" v-model=\"doctor_email_record\" ></div>\n            </div>\n            <div class=\"col-md-12 col-sm-12 row pb-3\">\n              <div class=\"p-2 col-sm-6 text-right\">Nhập quyền truy cập (nếu có):</div>\n              <div class=\"p-2 col-sm-6\"><input type=\"text\"  style=\"width:60%;\" v-model=\"doctor_right_record\" ></div>\n            </div>\n            <div v-if=\"error_access_record\" class=\"alert-error\">{{error_access_record}}</div>\n            <div class=\"d-flex justify-content-center btn-cus\">\n              <div class=\"btn btn-success mr-2\" @click=\"getUserRecords\">Truy Cập</div>\n              <div class=\"btn cancel-btn ml-2\" @click=\"refresh\">Làm mới</div>\n            </div>\n        </span>\n      </div>\n    </div>\n\n    <div class=\"search\" v-if=\"this.Istruycap\">\n      <h3 class=\"text-center title\">Hồ sơ bệnh nhân</h3>\n        <div class=\"content\">\n          <div>\n              <b-tabs card >\n              <b-tab title=\"Hồ Sơ Bệnh Án\" active><app-TimeLine /></b-tab>\n              <b-tab title=\"Dữ Liệu Bệnh Nhân\"><app-PatientData /></b-tab>\n          </b-tabs>\n\n        </div>\n        </div>\n\n    </div>\n      \n  </div>\n</template>\n\n<script>\nimport { mapGetters} from \"vuex\";\nimport DoctorService from '@/services/DoctorService'\n\nimport PatientView from '@/components/content/patient_modules/PatientView.vue'\nimport PatientData from '@/components/content/patient_modules/PatientData.vue'\nimport PatientService from '@/services/PatientService'\nimport HospitalService from '@/services/HospitalService'\nexport default {\n  data(){\n        return{\n            messageError:'',\n            doctor_email_record:'',          \n            doctor_right_record:'',\n            isWriteRecord:false,\n            error_access_record:null,\n            titleRecord:'',\n            diagnoseRecord:'',\n            errors: null,\n            Istruycap:false,\n            idRecord:null,\n            describe:'',\n            NewDrugs:[\n              {\n                name:'',\n                id_record:'',\n                total:'',\n                morning:'',\n                midday:'',\n                afternoon:'',\n                night:'',\n                note:'',\n              }\n            ],\n            \n            files: [],\n            isHideNewAlternativeRecord:true\n        }\n    },\n      computed: {\n        ...mapGetters([\"user\",\"patient_records\",\"doctorInfo\",\"hospitalInfo\",\"patientInfo\"])\n      },\n      components: {\n        \"app-TimeLine\": PatientView,  \n        \"app-PatientData\": PatientData,\n      },\n    async mounted() {\n        const id_account = this.user.id\n        const payload_doctor = (await DoctorService.getInfoDoctor(id_account)).data\n        this.$store.dispatch(\"setDoctorInfo\",payload_doctor)\n\n        const payload_hospital = (await HospitalService.getInfoHospital(payload_doctor.id_hospital)).data\n        this.$store.dispatch(\"setHospitalInfo\",payload_hospital)\n      },\n  methods: {\n    addFiles(){\n      this.$refs.files.click()\n    },\n    checkForm: function (e) {\n      if (this.titleRecord && this.diagnoseRecord) {\n        this.save()\n      }\n      this.errors = '';\n\n      if (!this.titleRecord) {\n        this.errors += 'Vui lòng nhập triệu chứng, lý do. <br> ';\n      }\n      if (!this.diagnoseRecord) {\n        this.errors += 'Vui lòng nhập chẩn đoán.';\n      }\n      let toast = this.$toasted.show(`${this.errors}`, {\n          theme: \"bubble\", \n          position: \"bottom-right\", \n          duration : 2000\n      });\n      this.errors = ''\n\n    },\n    handleFilesUpload () {\n      const allowedTypes = ['image/jpeg','image/png',\"image/gif\",'image/svg'];\n        let isError = true\n        this.messageError = \"\";\n        \n        let checkFilesUpload = this.$refs.files.files\n        let vm = this\n        // validate file\n        for (var i = 0; i < checkFilesUpload.length; i++) {\n          if(allowedTypes.includes(checkFilesUpload[i].type)){\n            isError = false\n          }else{\n            this.messageError = \"Định dạng không cho phép\\nĐịnh dạng hình ảnh bao gồm image/jpeg || image/png || image/gif  \";\n          }\n\n        }\n        \n        \n        if(!isError){\n          let uploadedFiles = this.$refs.files.files\n          for (var i = 0; i < uploadedFiles.length; i++) {\n            let reader = new FileReader()\n            reader.onload = function () {\n              vm.files.push({image: reader.result, file: reader.fileName})\n            }\n            reader.fileName = uploadedFiles[i].name\n            reader.readAsDataURL(uploadedFiles[i])\n          }\n       }\n\n    },\n    removeFile (key) {\n      this.files.splice(key, 1)\n    },\n    removeImage (key) {\n      this.files.splice(key, 1)\n    },\n    close(){\n       this.messageError = \"\";\n       this.$root.$emit('bv::hide::modal', 'modal-1', '#btnShow');\n    },\n    addNewDrugRecord(){\n     this.NewDrugs.push({\n        name:'',\n        id_record:'',\n        total:'',\n        morning:'',\n        midday:'',\n        afternoon:'',\n        night:'',\n        note:'',\n       \n     })\n    },\n    removeNewDrugRecord(index){\n      this.NewDrugs.splice(index, 1);\n    },\n    refresh(){\n       this.doctor_email_record = ''\n       this.doctor_right_record = ''\n    },\n      async getUserRecords(){\n        try {\n            const response = (await DoctorService.getUserRecords({\n                email: this.doctor_email_record,\n                right: this.doctor_right_record\n            })).data\n            this.$store.dispatch(\"set_patientInfo\",response)    \n            const _patientrecords = (await PatientService.show(response.id_account)).data\n            this.$store.dispatch(\"update_inforRecordsPatientDetail\",_patientrecords)\n            this.isWriteRecord = true;\n            this.Istruycap = true;\n        }catch (error) {\n            this.error_access_record = error.response.data.error\n            }\n      },\n      end(){\n        this.Istruycap = false\n        this.messageError = \"\",\n        this.isWriteRecord = false\n        this.$store.dispatch(\"resetPatient_records\");\n        localStorage.removeItem('patient_records');\n      },\n      resetForm(){\n            this.doctor_email_record = '',\n            this.doctor_right_record='',\n            // this.isWriteRecord=false,\n            this.error_access_record=null,\n            this.titleRecord='',\n            this.diagnoseRecord='',\n            // this.Istruycap = false,\n            this.errors = [],\n            this.idRecord = null,\n            this.NewDrugs=[\n              {\n                name:'',\n                id_record:'',\n                total:'',\n                morning:'',\n                midday:'',\n                afternoon:'',\n                night:'',\n                note:'',            \n              }\n            ]\n            this.describe = '',\n            this.files = [],\n            this.isHideNewAlternativeRecord = true\n          this.$root.$emit('bv::hide::modal', 'modal-1', '#btnShow')     \n      },\n      async save(){\n                try {\n                    const response = (await DoctorService.saveRecord({\n                    id_patient: this.patientInfo.id_account,\n                    id_doctor: this.user.id,\n                    patient_title:this.titleRecord,\n                    patient_location:this.hospitalInfo.name_hospital,\n                    patient_time: new Date().toISOString().slice(0,10),\n                    patient_content: this.diagnoseRecord\n                    })).data\n                    this.idRecord = response.id\n      \n                    this.NewDrugs.forEach(element => {\n                      element.id_record = this.idRecord\n                    });\n\n                }catch (error) {\n                    this.error = error.response.data.error\n                    }\n\n              if(this.NewDrugs){\n                try {\n                    const length =  this.NewDrugs.length\n                    const response = await DoctorService.saveDrugRecord({\n                      objects_drug:this.NewDrugs,\n                       length:length\n                    })\n                }catch (error) {\n                    this.error = error.response.data.error\n                    }\n              }\n    \n                if(this.files){\n                  try {\n                    let length =  this.files.length\n                    const response = await DoctorService.saveAlternativeRecords({\n                      objects_files:this.files,\n                      describe:this.describe,\n                      id_record:this.idRecord,\n                      length:length,\n                    })\n                }catch (error) {\n                    this.error = error.response.data.error\n                    }\n                }\n                let toast = this.$toasted.show(`Thành công !!`, { \n                    theme: \"bubble\", \n                    position: \"bottom-right\", \n                    duration : 2000\n                });\n                    this.resetForm()\n\n                \n      }\n  },\n}\n</script>\n\n<style scoped>\n* {\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 14px;\n}\n.title{\n  margin: 0;\n  border-bottom: none !important;\n  background: #40c4ff;\n  color:white;\n}\n.search h3{\n  padding:0.5rem;\n  border: 2px solid #40c4ff;\n}\n.content{\n  padding:0.5rem;\n  border: 2px solid #40c4ff;\n}\ninput{\n  border:1px solid rgb(0, 0, 0,.3);\n  border-radius: 2px;\n}\n.btn-cus{\n  padding-left: 28vw;\n}\n.cancel-btn{\n    border: 1px solid #ccd0d5;\n    border-radius: 2px;\n    background-color: #f5f6f7;\n    cursor: pointer;\n}   \n.card-header-tabs{\n  padding: 10rem;\n  color: red;\n}\n.alert-error{\n  text-align: center;\n  color: red;\n}\n.add img{\n  height: 2rem;\n  width: 2rem;\n  border-radius: 50%;\n}\n.add2 img{\n  border-radius: 0;\n}\n.add{\n  cursor: pointer;\n}\n.add img:hover{\n    -webkit-box-shadow: 2px 2px 15px 0px rgba(183,214,240,1);\n    -moz-box-shadow: 2px 2px 15px 0px rgba(183,214,240,1);\n    box-shadow: 2px 2px 15px 0px rgba(183,214,240,1);\n}\n.close{\n  cursor: pointer;\n}\n.close:hover{\n    -webkit-box-shadow: 2px 2px 5px 0px rgba(183,214,240,1);\n    -moz-box-shadow: 2px 2px 5px 0px rgba(183,214,240,1);\n    box-shadow: 2px 2px 5px 0px rgba(183,214,240,1);\n}\ntextarea\n{\n  width:100%;\n}\n.form{\n  padding:0.5rem;\n  border: 1px solid rgb(0, 0, 0,.4)\n}\n.danger-alert{\n  color:red\n}\n.Custominput img {\n  max-width: 100%;\n  max-height: 500px;\n}\n.colorDrug{\n  color: #F44336;\n}\n.colorFile{\n  color:#9C27B0;\n}\ninput[type=\"file\"]{\n  position: absolute;\n  top: -500px;\n}\ndiv.file-listing img{\n  max-width: 40%;\n}\n.name-preview{\n  border:1px solid rgb(170, 170, 170,.3);\n  padding:0.5rem;\n  overflow: overlay;\n  max-width: 300px;\n  word-wrap: break-word;\n}\n.pointer{\n  cursor: pointer;\n}\n.CenterCSS{\n  margin-bottom: 10vh;\n  margin-top: 9vh;\n}\n</style>\n"],"sourceRoot":"src/components/content"}]}
{"remainingRequest":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/Login.vue","mtime":1569932244000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AuthenticationService from '@/services/AuthenticationService';\nimport { mapGetters } from \"vuex\";\nexport default {\n  computed: _objectSpread({}, mapGetters([\"user\"]), {\n    login_username: {\n      get: function get() {\n        return this.$store.getters.login_username;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updateUsername\", payload);\n      }\n    },\n    login_password: {\n      get: function get() {\n        return this.$store.getters.login_password;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updatePassword\", payload);\n      }\n    }\n  }),\n  mounted: function mounted() {\n    localStorage.removeItem('vuex');\n  },\n  methods: {\n    submitLogin: function () {\n      var _submitLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return AuthenticationService.login({\n                  email: this.login_username,\n                  password: this.login_password\n                });\n\n              case 3:\n                response = _context.sent;\n                this.$store.dispatch('setToken', response.data.token);\n                this.$store.dispatch('setUser', response.data.user);\n                this.$store.dispatch('resetlogin');\n                window.scrollTo(0, 100); //trick fix slow react\n\n                if (response.data.user.roles == 1) {\n                  this.$router.push({\n                    name: 'patient',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                if (response.data.user.roles == 2) {\n                  this.$router.push({\n                    name: 'hospital',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                if (response.data.user.roles == 3) {\n                  this.$router.push({\n                    name: 'doctor',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                if (response.data.user.roles == 0) {\n                  this.$router.push({\n                    name: 'admin',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                _context.next = 17;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](0);\n                this.$toasted.show(\"\".concat(_context.t0.response.data.error), {\n                  theme: \"bubble\",\n                  position: \"bottom-right\",\n                  duration: 2000\n                });\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 14]]);\n      }));\n\n      function submitLogin() {\n        return _submitLogin.apply(this, arguments);\n      }\n\n      return submitLogin;\n    }()\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div class=\"bg\">\n<form>\n     <b-row class=\"login shadow p-3 mb-5 bg-white rounded \">\n      <b-col\n        cols=\"12\"\n        class=\"label-login d-flex justify-content-center text-red\"\n      >\n        <h2>Đăng Nhập</h2>\n      </b-col>\n\n      <b-col cols=\"12\">\n        <b-row class=\"lg-control\">\n          <b-col class=\"d-flex inputCus\"\n            ><input type=\"text\" placeholder=\"Nhập Tài Khoản\" v-model=\"login_username\" />\n          </b-col>\n          <span class=\"d-flex align-items-center\"><img src=\"@/assets/images/man-user.svg\" /></span>\n        </b-row>\n      </b-col>\n\n      <div class=\"spacer-5\"></div>\n\n      <b-col cols=\"12\">\n        <b-row class=\"lg-control\">\n          <b-col class=\"d-flex inputCus\"\n            ><input type=\"password\" placeholder=\"Nhập Mật Khẩu\" v-model=\"login_password\"\n          /></b-col>\n           <span class=\"d-flex align-items-center\"><img src=\"@/assets/images/locked.svg\" /></span>\n        </b-row>\n      </b-col>\n      <div class=\"spacer-5\"></div>\n      <b-col cols=\"12\">\n        <b-row class=\"justify-content-around\">\n          <b-button variant=\"outline-primary\" @click=\"submitLogin\">Đăng Nhập</b-button>\n        </b-row>\n      </b-col>\n\n      <b-col cols=\"12\">\n        <div class=\"d-flex\">\n          <b-col class=\"border-top-custom align-self-center\"></b-col>\n          <div class=\"text-center seperate\">Hoặc</div>\n          <b-col class=\"border-top-custom align-self-center\"></b-col>\n        </div>\n      </b-col>\n\n      <b-col cols=\"12\">\n        <b-row class=\"justify-content-center\">\n        <p class=\"text-request\" v-b-modal.modal-1>\n            Gửi Yêu Cầu Tạo Tài Khoản</p>\n          <b-modal id=\"modal-1\" title=\"ĐĂNG KÍ\" class=\"text-center\"  ok-only>\n              <router-link to=\"/registerpatient\"><p class=\"my-4\">Đăng Kí Dành Cho Bệnh Nhân</p></router-link>\n              <router-link to=\"/registerhospital\"><p class=\"my-4\">Đăng Kí Dành Cho Bệnh Viện</p></router-link>\n          </b-modal>\n        </b-row>\n      </b-col>\n    </b-row>\n</form>\n</div>\n</template>\n<script>\nimport AuthenticationService from '@/services/AuthenticationService';\nimport { mapGetters} from \"vuex\";\nexport default {\n  computed: {\n        ...mapGetters([\"user\"]),\n        login_username: {\n           get(){ \n               return this.$store.getters.login_username\n            },\n           set(payload){  \n               this.$store.dispatch(\"updateUsername\",payload)\n           }\n        },\n        login_password: {\n           get(){ \n               return this.$store.getters.login_password\n            },\n           set(payload){  \n               this.$store.dispatch(\"updatePassword\",payload)\n           }\n        },\n  },\n  mounted() {\n    localStorage.removeItem('vuex');\n  },\n  methods:{\n    async submitLogin(){\n            try {\n                const response = await AuthenticationService.login({\n                  email: this.login_username,\n                  password: this.login_password\n                })\n                  this.$store.dispatch('setToken', response.data.token)\n                  this.$store.dispatch('setUser', response.data.user)\n                  this.$store.dispatch('resetlogin')\n                  window.scrollTo(0,100)   //trick fix slow react\n               if(response.data.user.roles == 1){\n                this.$router.push({\n                  name:'patient',\n                  params: {id:this.user.id}\n                })\n               }\n              if(response.data.user.roles == 2){\n                this.$router.push({\n                  name:'hospital',\n                  params: {id:this.user.id}\n                })\n               }\n              if(response.data.user.roles == 3){\n                this.$router.push({\n                  name:'doctor',\n                  params: {id:this.user.id}\n                })\n               }\n\n              if(response.data.user.roles == 0){\n                this.$router.push({\n                  name:'admin',\n                  params: {id:this.user.id}\n                })\n               }\n\n            }         \n            catch (error) {\n              this.$toasted.show(`${error.response.data.error}`, { \n                theme: \"bubble\", \n                position: \"bottom-right\", \n                duration : 2000\n              });\n              \n              }\n        },\n  },\n};\n</script>\n\n<style scoped>\n/* dùng emit gửi cho app.vue để set-backgouround */\n.bg {\n  font-family: Arial, Helvetica, sans-serif;\n  margin-top: 15vh;\n  margin-bottom: 10vh;\n  font-size: 14px;\n\n}\n.login {\n  border: 1px solid #bdc3c7;\n  border-radius: 15px;\n  width: 50vh;\n  height: 75vh;\n  background: #000;\n  margin: auto;\n}\n.label-login {\n  padding: 1rem 0;\n}\n\n.spacer-10 {\n  width: 100%;\n  height: 10px;\n}\n\n.label-login {\n  margin-top: 5vh;\n}\n\n.lg-control input{\n  border: 1px solid #bdc3c7;\n  padding: 1ex;\n  position: relative;\n  padding-left: 30px;\n  border-radius: 5px;\n  width: 80vmin;\n}\n\n.lg-control img {\n  height: 1.2em;\n  width: 1.2em;\n  position: absolute;\n  left: 25px;\n}\n.inputCus {\n  position: relative;\n}\n.border-top-custom {\n  border-top: 1px solid #cdc9c9;\n}\n\n.seperate {\n  padding: 0 15px;\n  color: #cdc9c9;\n}\n.text-request {\n  color: #2c3e50;\n}\n\n.text-red {\n  color: red;\n}\n\n.text-request:hover {\n  text-decoration: underline;\n  cursor: pointer;\n} \n</style>\n"],"sourceRoot":"src/components/content"}]}
{"remainingRequest":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/src/components/content/Login.vue","mtime":1571409489000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/mac/Documents/QL-HoSoBenhAn/medicalproject/client/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AuthenticationService from '@/services/AuthenticationService';\nimport AccountService from '@/services/AccountService';\nimport { mapGetters } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      API_KEYS: null,\n      API_CHECK: null,\n      email: '',\n      password: '',\n      password_again: ''\n    };\n  },\n  computed: _objectSpread({}, mapGetters([\"user\"]), {\n    login_username: {\n      get: function get() {\n        return this.$store.getters.login_username;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updateUsername\", payload);\n      }\n    },\n    login_password: {\n      get: function get() {\n        return this.$store.getters.login_password;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updatePassword\", payload);\n      }\n    }\n  }),\n  mounted: function mounted() {\n    localStorage.removeItem('vuex');\n  },\n  methods: {\n    checkAPIKEY: function () {\n      var _checkAPIKEY = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(this.API_KEYS + ' API_KEYS');\n                console.log(this.API_CHECK + 'API_CHECK');\n\n                if (this.API_KEYS != this.API_CHECK) {\n                  this.$toasted.show(\"M\\xE3 X\\xE1c Th\\u1EF1c Kh\\xF4ng \\u0110\\xFAng Vui l\\xF2ng ki\\u1EC3m tra l\\u1EA1i !\", {\n                    theme: \"bubble\",\n                    position: \"bottom-right\",\n                    duration: 5000\n                  });\n                } else {\n                  this.$root.$emit('bv::show::modal', 'modal-4', '#btnShow');\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function checkAPIKEY() {\n        return _checkAPIKEY.apply(this, arguments);\n      }\n\n      return checkAPIKEY;\n    }(),\n    changePassword: function () {\n      var _changePassword = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return AccountService.forgotPassword({\n                  api_key: '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',\n                  email: this.email,\n                  password: this.password\n                });\n\n              case 3:\n                response = _context2.sent;\n                this.$toasted.show(\"\\u0110\\u1ED7i M\\u1EADt Kh\\u1EA9u Th\\xE0nh c\\xF4ng !\", {\n                  theme: \"bubble\",\n                  position: \"bottom-center\",\n                  duration: 5000\n                });\n                this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow');\n                this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow');\n                this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow');\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n                this.$toasted.show(\"\".concat(_context2.t0.response.data.error), {\n                  theme: \"outline\",\n                  position: \"bottom-center\",\n                  duration: 5000\n                });\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 10]]);\n      }));\n\n      function changePassword() {\n        return _changePassword.apply(this, arguments);\n      }\n\n      return changePassword;\n    }(),\n    checkForm: function () {\n      var _checkForm = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(e) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.validEmail(this.email)) {\n                  this.$toasted.show(\"Vui l\\xF2ng nh\\u1EADp \\u0111\\xFAng \\u0111\\u1ECBnh d\\u1EA1ng email !\", {\n                    theme: \"outline\",\n                    position: \"bottom-center\",\n                    duration: 5000\n                  });\n                } else {\n                  this.sendAuthentication();\n                  this.$root.$emit('bv::show::modal', 'modal-3', '#btnShow');\n                }\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function checkForm(_x) {\n        return _checkForm.apply(this, arguments);\n      }\n\n      return checkForm;\n    }(),\n    validEmail: function validEmail(email) {\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(email);\n    },\n    validPassword: function validPassword(email) {\n      var re = /^[a-zA-Z0-9]{8,32}$/;\n      return re.test(email);\n    },\n    resetModal_2: function resetModal_2() {\n      this.API_KEYS = null, this.API_CHECK = null, this.email = '', this.password = '', this.password_again = '', this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow');\n    },\n    resetModal_3: function resetModal_3() {\n      this.API_KEYS = null, this.API_CHECK = null, this.email = '', this.password = '', this.password_again = ''.this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow');\n    },\n    resetModal_4: function resetModal_4() {\n      this.API_KEYS = null, this.API_CHECK = null, this.email = '', this.password = '', this.password_again = '', this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow');\n    },\n    IntegerGenerator: function IntegerGenerator() {\n      return Math.floor(Math.random() * 10001);\n    },\n    sendAuthentication: function () {\n      var _sendAuthentication = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.API_KEYS = this.IntegerGenerator();\n                console.log('this.API_KEYS ' + this.API_KEYS);\n                _context4.prev = 2;\n                _context4.next = 5;\n                return AuthenticationService.AuthenticationEmail({\n                  API_KEYS: this.API_KEYS,\n                  email: this.email\n                });\n\n              case 5:\n                response = _context4.sent;\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](2);\n                this.$toasted.show(\"\".concat(_context4.t0.response.data.error), {\n                  theme: \"outline\",\n                  position: \"bottom-center\",\n                  duration: 5000\n                });\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[2, 8]]);\n      }));\n\n      function sendAuthentication() {\n        return _sendAuthentication.apply(this, arguments);\n      }\n\n      return sendAuthentication;\n    }(),\n    checkPassword: function checkPassword() {\n      if (this.password !== this.password_again) {\n        this.$toasted.show(\"Password v\\xE0 Password x\\xE1c nh\\u1EADn kh\\xF4ng gi\\u1ED1ng nhau, Vui l\\xF2ng ki\\u1EC3m tra l\\u1EA1i !\", {\n          theme: \"outline\",\n          position: \"bottom-center\",\n          duration: 5000\n        });\n        this.password = '';\n        this.password_again = '';\n      } else if (!this.validPassword(this.password)) {\n        this.$toasted.show(\"M\\u1EADt kh\\u1EA9u \\u0111\\u01B0\\u1EE3c cung c\\u1EA5p ph\\u1EA3i kh\\u1EDBp v\\u1EDBi c\\xE1c quy t\\u1EAFc sau:\\n              <br>\\n              1. N\\xF3 ph\\u1EA3i ch\\u1EE9a ch\\u1EC9 c\\xE1c k\\xFD t\\u1EF1 sau: ch\\u1EEF th\\u01B0\\u1EDDng, ch\\u1EEF hoa, ch\\u1EEF s\\u1ED1.\\n              <br>\\n              2. m\\u1EADt kh\\u1EA9u d\\xE0i \\xEDt nh\\u1EA5t 8 k\\xED t\\u1EF1 v\\xE0 kh\\xF4ng d\\xE0i h\\u01A1n 32 k\\xED t\\u1EF1.\\n              \", {\n          theme: \"outline\",\n          position: \"bottom-center\",\n          duration: 5000\n        });\n      } else {\n        this.changePassword();\n      }\n    },\n    submitLogin: function () {\n      var _submitLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return AuthenticationService.login({\n                  email: this.login_username,\n                  password: this.login_password\n                });\n\n              case 3:\n                response = _context5.sent;\n                this.$store.dispatch('setToken', response.data.token);\n                this.$store.dispatch('setUser', response.data.user);\n                this.$store.dispatch('resetlogin');\n                window.scrollTo(0, 100); //trick fix slow react\n\n                if (response.data.user.roles == 1) {\n                  this.$router.push({\n                    name: 'patient',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                if (response.data.user.roles == 2) {\n                  this.$router.push({\n                    name: 'hospital',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                if (response.data.user.roles == 3) {\n                  this.$router.push({\n                    name: 'doctor',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                if (response.data.user.roles == 0) {\n                  this.$router.push({\n                    name: 'admin',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                _context5.next = 17;\n                break;\n\n              case 14:\n                _context5.prev = 14;\n                _context5.t0 = _context5[\"catch\"](0);\n                this.$toasted.show(\"\".concat(_context5.t0.response.data.error), {\n                  theme: \"bubble\",\n                  position: \"bottom-right\",\n                  duration: 2000\n                });\n\n              case 17:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 14]]);\n      }));\n\n      function submitLogin() {\n        return _submitLogin.apply(this, arguments);\n      }\n\n      return submitLogin;\n    }()\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA,OAAA,qBAAA,MAAA,kCAAA;AACA,OAAA,cAAA,MAAA,2BAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,SAAA,EAAA,IAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,cAAA,EAAA;AALA,KAAA;AAOA,GATA;AAUA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,MAAA,CAAA,CADA;AAEA,IAAA,cAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,OAJA,EAIA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,OAAA;AACA;AANA,KAFA;AAUA,IAAA,cAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,OAJA,EAIA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,OAAA;AACA;AANA;AAVA,IAVA;AA6BA,EAAA,OA7BA,qBA6BA;AACA,IAAA,YAAA,CAAA,UAAA,CAAA,MAAA;AACA,GA/BA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA,GAAA,WAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,SAAA,GAAA,WAAA;;AACA,oBAAA,KAAA,QAAA,IAAA,KAAA,SAAA,EAAA;AACA,uBAAA,QAAA,CAAA,IAAA,sFAAA;AACA,oBAAA,KAAA,EAAA,QADA;AAEA,oBAAA,QAAA,EAAA,cAFA;AAGA,oBAAA,QAAA,EAAA;AAHA,mBAAA;AAKA,iBANA,MAMA;AACA,uBAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,SAAA,EAAA,UAAA;AACA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAcA,IAAA,cAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAgBA,cAAA,CAAA,cAAA,CAAA;AACA,kBAAA,OAAA,EAAA,uEADA;AAEA,kBAAA,KAAA,EAAA,KAAA,KAFA;AAGA,kBAAA,QAAA,EAAA,KAAA;AAHA,iBAAA,CAhBA;;AAAA;AAgBA,gBAAA,QAhBA;AAqBA,qBAAA,QAAA,CAAA,IAAA,wDAAA;AACA,kBAAA,KAAA,EAAA,QADA;AAEA,kBAAA,QAAA,EAAA,eAFA;AAGA,kBAAA,QAAA,EAAA;AAHA,iBAAA;AAKA,qBAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,SAAA,EAAA,UAAA;AACA,qBAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,SAAA,EAAA,UAAA;AACA,qBAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,SAAA,EAAA,UAAA;AA5BA;AAAA;;AAAA;AAAA;AAAA;AA+BA,qBAAA,QAAA,CAAA,IAAA,WAAA,aAAA,QAAA,CAAA,IAAA,CAAA,KAAA,GAAA;AACA,kBAAA,KAAA,EAAA,SADA;AAEA,kBAAA,QAAA,EAAA,eAFA;AAGA,kBAAA,QAAA,EAAA;AAHA,iBAAA;;AA/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAsCA,IAAA,SAAA;AAAA;AAAA;AAAA,8BAAA,kBAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,CAAA,KAAA,UAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,uBAAA,QAAA,CAAA,IAAA,wEAAA;AACA,oBAAA,KAAA,EAAA,SADA;AAEA,oBAAA,QAAA,EAAA,eAFA;AAGA,oBAAA,QAAA,EAAA;AAHA,mBAAA;AAKA,iBANA,MAOA;AACA,uBAAA,kBAAA;AACA,uBAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,SAAA,EAAA,UAAA;AACA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OAtCA;AAmDA,IAAA,UAAA,EAAA,oBAAA,KAAA,EAAA;AACA,UAAA,EAAA,GAAA,yJAAA;AACA,aAAA,EAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA,KAtDA;AAuDA,IAAA,aAAA,EAAA,uBAAA,KAAA,EAAA;AACA,UAAA,EAAA,GAAA,qBAAA;AACA,aAAA,EAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA,KA1DA;AA2DA,IAAA,YA3DA,0BA2DA;AACA,WAAA,QAAA,GAAA,IAAA,EACA,KAAA,SAAA,GAAA,IADA,EAEA,KAAA,KAAA,GAAA,EAFA,EAGA,KAAA,QAAA,GAAA,EAHA,EAIA,KAAA,cAAA,GAAA,EAJA,EAKA,KAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,SAAA,EAAA,UAAA,CALA;AAMA,KAlEA;AAmEA,IAAA,YAnEA,0BAmEA;AACA,WAAA,QAAA,GAAA,IAAA,EACA,KAAA,SAAA,GAAA,IADA,EAEA,KAAA,KAAA,GAAA,EAFA,EAGA,KAAA,QAAA,GAAA,EAHA,EAIA,KAAA,cAAA,GAAA,GACA,IADA,CACA,KADA,CACA,KADA,CACA,iBADA,EACA,SADA,EACA,UADA,CAJA;AAMA,KA1EA;AA2EA,IAAA,YA3EA,0BA2EA;AACA,WAAA,QAAA,GAAA,IAAA,EACA,KAAA,SAAA,GAAA,IADA,EAEA,KAAA,KAAA,GAAA,EAFA,EAGA,KAAA,QAAA,GAAA,EAHA,EAIA,KAAA,cAAA,GAAA,EAJA,EAKA,KAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,SAAA,EAAA,UAAA,CALA;AAMA,KAlFA;AAmFA,IAAA,gBAnFA,8BAmFA;AACA,aAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,MAAA,KAAA,KAAA,CAAA;AACA,KArFA;AAsFA,IAAA,kBAtFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuFA,qBAAA,QAAA,GAAA,KAAA,gBAAA,EAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,mBAAA,KAAA,QAAA;AAxFA;AAAA;AAAA,uBA0FA,qBAAA,CAAA,mBAAA,CAAA;AACA,kBAAA,QAAA,EAAA,KAAA,QADA;AAEA,kBAAA,KAAA,EAAA,KAAA;AAFA,iBAAA,CA1FA;;AAAA;AA0FA,gBAAA,QA1FA;AAAA;AAAA;;AAAA;AAAA;AAAA;AA+FA,qBAAA,QAAA,CAAA,IAAA,WAAA,aAAA,QAAA,CAAA,IAAA,CAAA,KAAA,GAAA;AACA,kBAAA,KAAA,EAAA,SADA;AAEA,kBAAA,QAAA,EAAA,eAFA;AAGA,kBAAA,QAAA,EAAA;AAHA,iBAAA;;AA/FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAsGA,IAAA,aAtGA,2BAsGA;AACA,UAAA,KAAA,QAAA,KAAA,KAAA,cAAA,EAAA;AACA,aAAA,QAAA,CAAA,IAAA,4GAAA;AACA,UAAA,KAAA,EAAA,SADA;AAEA,UAAA,QAAA,EAAA,eAFA;AAGA,UAAA,QAAA,EAAA;AAHA,SAAA;AAKA,aAAA,QAAA,GAAA,EAAA;AACA,aAAA,cAAA,GAAA,EAAA;AACA,OARA,MAQA,IAAA,CAAA,KAAA,aAAA,CAAA,KAAA,QAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,IAAA,8aAKA;AACA,UAAA,KAAA,EAAA,SADA;AAEA,UAAA,QAAA,EAAA,eAFA;AAGA,UAAA,QAAA,EAAA;AAHA,SALA;AAUA,OAXA,MAYA;AACA,aAAA,cAAA;AACA;AACA,KA9HA;AA+HA,IAAA,WA/HA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAiIA,qBAAA,CAAA,KAAA,CAAA;AACA,kBAAA,KAAA,EAAA,KAAA,cADA;AAEA,kBAAA,QAAA,EAAA,KAAA;AAFA,iBAAA,CAjIA;;AAAA;AAiIA,gBAAA,QAjIA;AAqIA,qBAAA,MAAA,CAAA,QAAA,CAAA,UAAA,EAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,qBAAA,MAAA,CAAA,QAAA,CAAA,SAAA,EAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,qBAAA,MAAA,CAAA,QAAA,CAAA,YAAA;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA,CAAA,EAAA,GAAA,EAxIA,CAwIA;;AACA,oBAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA,SADA;AAEA,oBAAA,MAAA,EAAA;AAAA,sBAAA,EAAA,EAAA,KAAA,IAAA,CAAA;AAAA;AAFA,mBAAA;AAIA;;AACA,oBAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA,UADA;AAEA,oBAAA,MAAA,EAAA;AAAA,sBAAA,EAAA,EAAA,KAAA,IAAA,CAAA;AAAA;AAFA,mBAAA;AAIA;;AACA,oBAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA,QADA;AAEA,oBAAA,MAAA,EAAA;AAAA,sBAAA,EAAA,EAAA,KAAA,IAAA,CAAA;AAAA;AAFA,mBAAA;AAIA;;AAEA,oBAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA,OADA;AAEA,oBAAA,MAAA,EAAA;AAAA,sBAAA,EAAA,EAAA,KAAA,IAAA,CAAA;AAAA;AAFA,mBAAA;AAIA;;AAjKA;AAAA;;AAAA;AAAA;AAAA;AAqKA,qBAAA,QAAA,CAAA,IAAA,WAAA,aAAA,QAAA,CAAA,IAAA,CAAA,KAAA,GAAA;AACA,kBAAA,KAAA,EAAA,QADA;AAEA,kBAAA,QAAA,EAAA,cAFA;AAGA,kBAAA,QAAA,EAAA;AAHA,iBAAA;;AArKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAhCA,CAAA","sourcesContent":["<template>\n<div class=\"bg\">\n<form>\n     <b-row class=\"login shadow p-3 mb-5 bg-white rounded \">\n      <b-col\n        cols=\"12\"\n        class=\"label-login d-flex justify-content-center text-red\"\n      >\n        <h2>Đăng Nhập</h2>\n      </b-col>\n\n      <b-col cols=\"12\">\n        <b-row class=\"lg-control\">\n          <b-col class=\"d-flex inputCus\"\n            ><input type=\"text\" placeholder=\"Nhập Tài Khoản\" v-model=\"login_username\" />\n          </b-col>\n          <span class=\"d-flex align-items-center\"><img src=\"@/assets/images/man-user.svg\" /></span>\n        </b-row>\n      </b-col>\n\n      <div class=\"spacer-5\"></div>\n\n      <b-col cols=\"12\">\n        <b-row class=\"lg-control\">\n          <b-col class=\"d-flex inputCus\"\n            ><input type=\"password\" placeholder=\"Nhập Mật Khẩu\" v-model=\"login_password\"\n          /></b-col>\n           <span class=\"d-flex align-items-center\"><img src=\"@/assets/images/locked.svg\" /></span>\n        </b-row>\n      </b-col>\n      <div class=\"spacer-5\"></div>\n      <b-col cols=\"12\">\n        <b-row class=\"justify-content-around\">\n          <b-button variant=\"outline-primary\" @click=\"submitLogin\">Đăng Nhập</b-button>\n        </b-row>\n      </b-col>\n\n      <b-col cols=\"12\">\n        <div class=\"d-flex\">\n          <b-col class=\"border-top-custom align-self-center\"></b-col>\n          <div class=\"text-center seperate\">Hoặc</div>\n          <b-col class=\"border-top-custom align-self-center\"></b-col>\n        </div>\n      </b-col>\n\n      <b-col cols=\"12\">\n        <b-row class=\"d-flex justify-content-center\">\n        <p class=\"text-request\" v-b-modal.modal-1>\n            Gửi Yêu Cầu Tạo Tài Khoản</p>\n          <b-modal id=\"modal-1\" title=\"ĐĂNG KÍ\" class=\"text-center\"  ok-only>\n              <router-link to=\"/registerpatient\"><p class=\"my-4\">Đăng Kí Dành Cho Bệnh Nhân</p></router-link>\n              <router-link to=\"/registerhospital\"><p class=\"my-4\">Đăng Kí Dành Cho Bệnh Viện</p></router-link>\n          </b-modal>\n        </b-row>\n      </b-col>\n      <b-col cols=\"12\">\n        <b-row class=\"d-flex justify-content-center\">\n        <p class=\"text-request\" v-b-modal.modal-2>\n            Quên Mật Khẩu</p>\n          <b-modal id=\"modal-2\" title=\"Quên mật khẩu\" class=\"d-flex\">\n            <span class=\"title\"> Nhập Email </span>\n            <input  type=\"text\" class=\"w-100 p-1\" v-model=\"email\">\n              <template v-slot:modal-footer>\n                  <div class=\"w-100\">\n                  <b-button\n                      variant=\"secondary\"\n                      size=\"sm\"\n                      class=\"float-right text-white\"\n                      @click=\"resetModal_2\"\n                  >\n                      Đóng\n                  </b-button>\n                  <b-button\n                      @click=\"checkForm\"\n                      variant=\"warning\"\n                      size=\"sm\"\n                      class=\"float-right mr-3 SendReqCreateJob text-white\"\n                  >\n                      Gửi Yêu Cầu Đổi Mật Khẩu\n                  </b-button>\n                  </div>\n              </template>\n          </b-modal>\n          <b-modal id=\"modal-3\" title=\"Xác Thực\" class=\"d-flex\">\n            <span class=\"title\"> Nhập Mã Xác Thực Nhận Được  </span>\n            <input  type=\"text\" class=\"w-100 p-1\" v-model=\"API_CHECK\">\n              <template v-slot:modal-footer>\n                  <div class=\"w-100\">\n                  <b-button\n                      variant=\"secondary\"\n                      size=\"sm\"\n                      class=\"float-right text-white\"\n                      @click=\"resetModal_3\"\n                  >\n                      Đóng\n                  </b-button>\n                  <b-button\n                      @click=\"checkAPIKEY\"\n                      variant=\"warning\"\n                      size=\"sm\"\n                      class=\"float-right mr-3 SendReqCreateJob text-white\"\n                  >\n                      Gửi Xác Thuc\n                  </b-button>\n                  </div>\n              </template>\n          </b-modal>\n          <b-modal id=\"modal-4\" title=\"Đổi Mật Khẩu\" class=\"d-flex\">\n            <div class=\"py-2\">\n              <span class=\"title\"> Nhập Mật khẩu Mới  </span>\n              <input  type=\"password\" class=\"w-100 p-1\" v-model=\"password\">\n            </div>\n            <div class=\"py-2\">\n                <span class=\"title\"> Nhập Lại Mật khẩu Mới  </span>\n                <input type=\"password\" class=\"w-100 p-1\" v-model=\"password_again\">\n            </div>\n              <template v-slot:modal-footer>\n                  <div class=\"w-100\">\n                  <b-button\n                      variant=\"secondary\"\n                      size=\"sm\"\n                      class=\"float-right text-white\"\n                      @click=\"resetModal_4\"\n                  >\n                      Đóng\n                  </b-button>\n                  <b-button\n                      @click=\"checkPassword\"\n                      variant=\"success\"\n                      size=\"sm\"\n                      class=\"float-right mr-3 SendReqCreateJob text-white\"\n                  >\n                      Gửi Xác Thực\n                  </b-button>\n                  </div>\n              </template>\n          </b-modal>\n        </b-row>\n      </b-col>\n    </b-row>\n</form>\n</div>\n</template>\n<script>\nimport AuthenticationService from '@/services/AuthenticationService';\nimport AccountService from '@/services/AccountService';\nimport { mapGetters} from \"vuex\";\nexport default {\n  data(){\n    return{\n          API_KEYS:null,\n          API_CHECK:null,\n          email:'',\n          password:'',\n          password_again:''\n    }\n  },\n  computed: {\n        ...mapGetters([\"user\"]),\n        login_username: {\n           get(){ \n               return this.$store.getters.login_username\n            },\n           set(payload){  \n               this.$store.dispatch(\"updateUsername\",payload)\n           }\n        },\n        login_password: {\n           get(){ \n               return this.$store.getters.login_password\n            },\n           set(payload){  \n               this.$store.dispatch(\"updatePassword\",payload)\n           }\n        },\n  },\n  mounted() {\n    localStorage.removeItem('vuex');\n  },\n  methods:{\n        async checkAPIKEY(){\n            console.log(this.API_KEYS+' API_KEYS')\n            console.log(this.API_CHECK+ 'API_CHECK')\n            if(this.API_KEYS != this.API_CHECK){\n                this.$toasted.show(`Mã Xác Thực Không Đúng Vui lòng kiểm tra lại !`, { \n                    theme: \"bubble\", \n                    position: \"bottom-right\", \n                    duration : 5000\n                });\n            }else{\n                this.$root.$emit('bv::show::modal', 'modal-4', '#btnShow')\n            }\n        },\n        async changePassword(){\n            try {\n              const response = await AccountService.forgotPassword({\n                  api_key:'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',\n                  email:this.email,\n                  password:this.password\n              })\n              this.$toasted.show(`Đỗi Mật Khẩu Thành công !`, { \n                  theme: \"bubble\", \n                  position: \"bottom-center\", \n                  duration : 5000\n              });\n              this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow')\n              this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow')\n              this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow')\n\n          }catch (error) {\n              this.$toasted.show(`${error.response.data.error}`, { \n                  theme: \"outline\", \n                  position: \"bottom-center\", \n                  duration : 5000\n              });\n          }\n        },\n        checkForm:async function (e) {\n            if(!this.validEmail(this.email)) {\n                    this.$toasted.show(`Vui lòng nhập đúng định dạng email !`, { \n                    theme: \"outline\", \n                    position: \"bottom-center\", \n                    duration : 5000\n                });\n            }\n            else{\n                this.sendAuthentication();\n                this.$root.$emit('bv::show::modal', 'modal-3', '#btnShow')\n            }\n        },\n    validEmail: function (email) {\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(email)\n    },\n    validPassword: function (email) {\n        var re = /^[a-zA-Z0-9]{8,32}$/;\n        return re.test(email)\n    },\n    resetModal_2(){\n          this.API_KEYS = null,\n          this.API_CHECK = null,\n          this.email= '',\n          this.password='',\n          this.password_again='',\n          this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow')\n    },\n    resetModal_3(){\n          this.API_KEYS = null,\n          this.API_CHECK = null,\n          this.email= '',\n          this.password= '',\n          this.password_again=''.\n          this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow')\n    },\n    resetModal_4(){\n          this.API_KEYS = null,\n          this.API_CHECK = null,\n          this.email= '',\n          this.password= '',\n          this.password_again='',\n          this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow')\n    },\n    IntegerGenerator(){\n        return Math.floor(Math.random() * 10001);\n    },\n    async sendAuthentication(){\n        this.API_KEYS = this.IntegerGenerator();\n        console.log('this.API_KEYS '+this.API_KEYS)\n        try {\n            const response = await AuthenticationService.AuthenticationEmail({\n                API_KEYS:this.API_KEYS,\n                email:this.email\n            })\n        }catch (error) {\n            this.$toasted.show(`${error.response.data.error}`, { \n                theme: \"outline\", \n                position: \"bottom-center\", \n                duration : 5000\n            });\n        }\n    },\n    checkPassword(){\n      if(this.password !== this.password_again){\n          this.$toasted.show(`Password và Password xác nhận không giống nhau, Vui lòng kiểm tra lại !`, { \n              theme: \"outline\", \n              position: \"bottom-center\", \n              duration : 5000\n          });\n          this.password = '';\n          this.password_again = '';\n      }else if(!this.validPassword(this.password)){\n          this.$toasted.show(`Mật khẩu được cung cấp phải khớp với các quy tắc sau:\n              <br>\n              1. Nó phải chứa chỉ các ký tự sau: chữ thường, chữ hoa, chữ số.\n              <br>\n              2. mật khẩu dài ít nhất 8 kí tự và không dài hơn 32 kí tự.\n              `, {\n              theme: \"outline\", \n              position: \"bottom-center\", \n              duration : 5000\n          });\n      }\n      else{\n          this.changePassword();\n      }\n    },\n    async submitLogin(){\n            try {\n                const response = await AuthenticationService.login({\n                  email: this.login_username,\n                  password: this.login_password\n                })\n                  this.$store.dispatch('setToken', response.data.token)\n                  this.$store.dispatch('setUser', response.data.user)\n                  this.$store.dispatch('resetlogin')\n                  window.scrollTo(0,100)   //trick fix slow react\n               if(response.data.user.roles == 1){\n                this.$router.push({\n                  name:'patient',\n                  params: {id:this.user.id}\n                })\n               }\n              if(response.data.user.roles == 2){\n                this.$router.push({\n                  name:'hospital',\n                  params: {id:this.user.id}\n                })\n               }\n              if(response.data.user.roles == 3){\n                this.$router.push({\n                  name:'doctor',\n                  params: {id:this.user.id}\n                })\n               }\n\n              if(response.data.user.roles == 0){\n                this.$router.push({\n                  name:'admin',\n                  params: {id:this.user.id}\n                })\n               }\n\n            }         \n            catch (error) {\n              this.$toasted.show(`${error.response.data.error}`, { \n                theme: \"bubble\", \n                position: \"bottom-right\", \n                duration : 2000\n              });\n              \n              }\n        },\n  },\n};\n</script>\n\n<style scoped>\n/* dùng emit gửi cho app.vue để set-backgouround */\n.bg {\n  font-family: Arial, Helvetica, sans-serif;\n  margin-top: 15vh;\n  margin-bottom: 10vh;\n  font-size: 14px;\n\n}\n.login {\n  border: 1px solid #bdc3c7;\n  border-radius: 15px;\n  width: 50vh;\n  height: 75vh;\n  background: #000;\n  margin: auto;\n}\n.label-login {\n  padding: 1rem 0;\n}\n\n.spacer-10 {\n  width: 100%;\n  height: 10px;\n}\n\n.label-login {\n  margin-top: 5vh;\n}\n\n.lg-control input{\n  border: 1px solid #bdc3c7;\n  padding: 1ex;\n  position: relative;\n  padding-left: 30px;\n  border-radius: 5px;\n  width: 80vmin;\n}\n\n.lg-control img {\n  height: 1.2em;\n  width: 1.2em;\n  position: absolute;\n  left: 25px;\n}\n.inputCus {\n  position: relative;\n}\n.border-top-custom {\n  border-top: 1px solid #cdc9c9;\n}\n\n.seperate {\n  padding: 0 15px;\n  color: #cdc9c9;\n}\n.text-request {\n  color: #2c3e50;\n}\n\n.text-red {\n  color: red;\n}\n\n.text-request:hover {\n  text-decoration: underline;\n  cursor: pointer;\n} \n.title{\n  font-size: 1.2rem;\n  color:#2c3e50;\n}\n</style>\n"],"sourceRoot":"src/components/content"}]}